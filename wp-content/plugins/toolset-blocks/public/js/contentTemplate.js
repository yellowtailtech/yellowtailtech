!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=226)}({0:function(t,e){t.exports=window.wp.i18n},1:function(t,e){t.exports=window.wp.components},10:function(t,e){t.exports=window.wp.hooks},19:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var o=n(0),r=n(32),i=n.n(r),c=n(4),a=n(3);function u(t){var e=setTimeout((function(){Object(c.dispatch)("core/notices").createNotice("info",Object(o.__)("Processing server request, please wait...","wpv-views"),{id:"http_delay_notice",isDismissible:!0,type:"snackbar"})}),a.n);return new Promise((function(n,o){i()(t).then((function(t){clearTimeout(e),Object(c.dispatch)("core/notices").removeNotice("http_delay_notice"),n(t)}),(function(t){clearTimeout(e),Object(c.dispatch)("core/notices").removeNotice("http_delay_notice"),o(t)}))}))}},2:function(t,e){t.exports=window.wp.element},226:function(t,e,n){"use strict";n.r(e);var o=n(0),r=n(2),i=n(4),c=n(6);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=d(t);if(e){var r=d(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f(this,n)}}function f(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(f,t);var e,n,r,a=l(f);function f(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),y(p(e=a.call(this,t)),"deferAddingContentTemplateEditingNotice",(function(t){var n=Object(i.select)("core/editor").getCurrentPostType,r=Object(i.dispatch)("core/notices").createInfoNotice;if(n()||setTimeout(Object(c.partial)(t,t),1),Object(c.isEqual)("view-template",n())){var a=Object(o.__)("You are editing a template. Need help?","wpv-views");if(e.collections&&(a=Object(o.sprintf)(Object(o.__)('You are using the "%1$s" theme and you can show or hide the theme\'s elements. In the right sidebar, click the "Content Template" tab and scroll to the "Theme options (%1$s)" section.',"wpv-views"),e.themeName)),"1"!==e.noticeDismissed){r(a,{id:f.CT_EDITING_NOTICE_ID,isDismissible:!0,actions:[{label:Object(o.__)("Learn how to design templates with Toolset.","wpv-views"),url:"https://toolset.com/course-lesson/creating-templates-to-display-custom-posts/?utm_source=plugin&utm_medium=gui&utm_campaign=blocks"}]});var u=setInterval((function(){document.querySelector(".components-notice.is-info.is-dismissible")||(clearInterval(u),e.handleNoticeDismissed())}),1e3)}}}));var n=window.ctBlockEditor,r=n.ajaxurl,u=n.collections,s=n.themeName,l=n.noticeNonce,d=n.noticeDismissed;return e.ajaxurl=r,e.collections=u,e.themeName=s,e.noticeNonce=l,e.noticeDismissed=d,e.deferAddingContentTemplateEditingNotice(e.deferAddingContentTemplateEditingNotice),e}return e=f,(n=[{key:"handleNoticeDismissed",value:function(){jQuery.ajax({url:this.ajaxurl,method:"POST",data:{notice:f.CT_EDITING_NOTICE_ID,action:"wpv_dismiss_notice",type:"user",nonce:this.noticeNonce}})}}])&&u(e.prototype,n),r&&u(e,r),f}(r.Component);y(b,"CT_EDITING_NOTICE_ID","ct-editing-notice");var m=b;var h=function t(){var e,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=function(t){var e=Object(i.select)("core/editor").getCurrentPostType;if(e()||setTimeout(Object(c.partial)(t,t),1),Object(c.isEqual)("view-template",e())){var n=document.getElementById("wpv-ct-change-editor-opener");n&&n.addEventListener("click",(function(){var t=jQuery("#wpv-ct-change-editor");t.dialog({title:t.data("title"),modal:!0})}))}},(n="deferAddingChangeEditorHooks")in(e=this)?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,this.deferAddingChangeEditorHooks(this.deferAddingChangeEditorHooks)},v=n(10),g=n(3);function w(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||O(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){if(t){if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var j=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,"ctUsageClicked",(function(t){var e=t.target,n=Object(i.dispatch)(g.f).toggleUsage,o=e.value,r=w(e.name.matchAll(/wpv-content-template-usage\[(.+?)\]/g)),a=Object(c.get)(r,["0","1"],null);a&&n(a,o)})),P(this,"maybeModifyPostTypeInContentSelection",(function(t){if(g.e!==t)return t;var e=(0,Object(i.select)(g.f).getUsage)(),n=Object(c.get)(e,["single"],[]),o=Object(c.get)(e,["cpt-archive"],[]),r=Object(c.get)(e,["taxonomy-archive"],[]);return 0===n.length&&0===o.length||n.length>1||o.length>1||r.length>0||1===n.length&&1===o.length&&n[0]!==o[0]?t:n[0]||o[0]})),P(this,"maybeFetchOptionsInContentSelection",(function(t,n){var o=Object(i.select)("core/editor").getCurrentPostType;if(!Object(c.isEqual)(g.e,o()))return t;var r=e.maybeModifyPostTypeInContentSelection(g.e);return Object(c.isEqual)(g.e,r)?t:n(r)})),P(this,"deferAddingUsageElementsHooks",(function(t){var n=Object(i.select)("core/editor").getCurrentPostType;if(n()||setTimeout(Object(c.partial)(t,t),1),Object(c.isEqual)(g.e,n())){Object(v.addFilter)("toolsetViews.filters.currentPostTypeInContentSelection","wpv-views",e.maybeModifyPostTypeInContentSelection),Object(v.addFilter)("toolsetViews.filters.relatedPostTypesInContentSelection","wpv-views",e.maybeFetchOptionsInContentSelection),Object(v.addFilter)("toolsetViews.filters.relatedRFGsInContentSelection","wpv-views",e.maybeFetchOptionsInContentSelection);var o,r=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=O(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){a=!0,i=t},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw i}}}}(document.getElementsByClassName("js-wpv-content-template-usage-selector"));try{for(r.s();!(o=r.n()).done;){var a=o.value;a.addEventListener("click",e.ctUsageClicked),a.checked&&e.ctUsageClicked({target:a})}}catch(t){r.e(t)}finally{r.f()}}})),this.deferAddingUsageElementsHooks(this.deferAddingUsageElementsHooks)},S=n(8),E=n(1);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=D(t);if(e){var r=D(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return A(this,n)}}function A(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(a,t);var e,n,i,c=x(a);function a(){return R(this,a),c.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){var t=window.wp.editPost.PluginDocumentSettingPanel,e=this.props,n=e.post,i=e.onChangePostTitle;return React.createElement(r.Fragment,null,React.createElement(t,{name:"general-panel",title:"General",icon:" "},React.createElement("div",null,React.createElement(E.TextControl,{label:Object(o.__)("Name","wpv-views"),value:n.title,onChange:i}))))}}])&&T(e.prototype,n),i&&T(e,i),a}(r.Component),U=n(31),I=n(19);function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function H(t,e){return(H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=B(t);if(e){var r=B(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return L(this,n)}}function L(t,e){return!e||"object"!==M(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H(t,e)}(i,t);var e,n,o,r=q(i);function i(){return F(this,i),r.apply(this,arguments)}return e=i,(n=[{key:"fetchAvailableUsages",value:function(){var t="".concat(this.baseUrl,"/content-template/available-usages");return Object(I.a)({path:t,method:"GET"})}},{key:"cleanPostTypeAssignedPosts",value:function(t){var e="".concat(this.baseUrl,"/content-template/post-type/").concat(t,"/clean-assigned-posts");return Object(I.a)({path:e,method:"GET"})}}])&&G(e.prototype,n),o&&G(e,o),i}(U.a);function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=W(t);if(e){var r=W(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return K(this,n)}}function K(t,e){return!e||"object"!==V(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(c,t);var e,n,r,i=J(c);function c(){return z(this,c),i.apply(this,arguments)}return e=c,(n=[{key:"renderConditions",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AND",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(o.__)("NOT","wpv-views"),c="AND"===n?Object(o.__)("AND","wpv-views"):Object(o.__)("OR","wpv-views"),a=t.map((function(t){if(t.operator&&t.conditions&&t.conditions.length>0){var n=e.renderConditions(t.conditions,t.operator,t.negative);return"( ".concat(n," )")}var o=t.secondArgument.value&&t.secondArgument.value.label?t.secondArgument.value.label:"";return"<b>".concat(t.firstArgument.value.label,":</b> ").concat(o)})).join(" <small>".concat(c,"</small> "));return r?"<small>".concat(i,"</small> ( ").concat(a," ) "):a}},{key:"render",value:function(){var t=this.props,e=t.conditions,n=t.operator,o=t.negative;return React.createElement("div",{className:"conditions-text",dangerouslySetInnerHTML:{__html:this.renderConditions(e,n,o)}})}}])&&Q(e.prototype,n),r&&Q(e,r),c}(r.Component);function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function et(t,e){return(et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=it(t);if(e){var r=it(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ot(this,n)}}function ot(t,e){return!e||"object"!==Z(e)&&"function"!=typeof e?rt(t):e}function rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&et(t,e)}(c,t);var e,n,o,r=nt(c);function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=r.call(this,t)).state={modalOpened:!1,loading:!1},e.setUsage=e.setUsage.bind(rt(e)),e.cleanPostTypeAssignedPosts=e.cleanPostTypeAssignedPosts.bind(rt(e)),e.saveConditions=e.saveConditions.bind(rt(e)),e}return e=c,(n=[{key:"setUsage",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(i.dispatch)(g.f).setUsage(t,e,n,o),this.setState({modalOpened:!1,error:!1})}},{key:"cleanPostTypeAssignedPosts",value:function(){var t=this,e=this.props.postType,n=new Y;this.setState({loading:!0}),n.cleanPostTypeAssignedPosts(e.slug).then((function(){t.setState({loading:!1,error:!1}),Object(i.dispatch)(g.f).availableUsagesCleanAssignedPosts(e.slug)}),(function(){t.setState({loading:!1,error:!0})}))}},{key:"saveConditions",value:function(t,e){var n=this.props.postType,o=t.conditions;1===o.length&&""===o[0].firstArgument.value.value?this.setUsage(n.slug,!0):this.setUsage(n.slug,!0,t,e)}},{key:"render",value:function(){var t=this,e=this.props,n=e.postType,o=e.usageRow,r=this.state,i=r.modalOpened,c=r.loading,a=r.error,u=window.toolsetConditionals,s=u.ConditionalsModal,l=u.PostFieldCondition,f=u.EMPTY_POST_FIELD_CONDITION,p=!(!o||!o.enabled),d=!(!o||!o.conditions)&&o.conditions,y=o&&o.parsed_conditions?o.parsed_conditions:{},b=d?"Edit Conditions":"Set conditions",m={type:l,defaultCondition:f,parameters:{options:n.options}};return React.createElement("div",{className:"wpv-ct-usage-row"},React.createElement(E.CheckboxControl,{key:"checkbox_".concat(n.slug),label:n.display_name,value:n.slug,checked:p,className:"usage-row-checkbox is-inline-block",onChange:function(e){t.setState({error:!1}),t.setUsage(n.slug,e)}}),p&&React.createElement(E.Button,{className:"conditions-button is-link is-inline-block",onClick:function(){return t.setState({modalOpened:!0})}},b),i&&React.createElement(s,{key:"conditionals_".concat(n.slug),conditions:d,parsedConditions:y,clientId:"conditionals_".concat(n.slug),configuration:m,onCancel:function(){return t.setState({modalOpened:!1})},onChange:this.saveConditions,debug:!0}),d&&d.conditions&&d.conditions.length>0&&React.createElement(X,{conditions:d.conditions,operator:d.operator,negative:d.negative}),p&&n.has_assigned_posts&&React.createElement("div",{className:"dissident-posts-notice"},React.createElement("i",{className:"fa fa-warning"}),"Some posts have custom templates.",React.createElement(E.Button,{className:"clear-link is-link is-inline-block",onClick:this.cleanPostTypeAssignedPosts},c?React.createElement(E.Spinner,null):"Apply to all")),a&&React.createElement("p",null," Unexpected error when applying to all posts. "))}}])&&tt(e.prototype,n),o&&tt(e,o),c}(r.Component);function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function st(t,e){return(st=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=dt(t);if(e){var r=dt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ft(this,n)}}function ft(t,e){return!e||"object"!==at(e)&&"function"!=typeof e?pt(t):e}function pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&st(t,e)}(u,t);var e,n,i,a=lt(u);function u(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),e=a.call(this,t);var n=t.post,o=n&&n.meta&&n.meta.usage_priority?n.meta.usage_priority:0;return e.state={priority:o},e.onChangePriority=e.onChangePriority.bind(pt(e)),e}return e=u,(n=[{key:"onChangePriority",value:function(t){this.setState({priority:parseInt(t)}),this.props.onChangePriority(parseInt(t))}},{key:"render",value:function(){var t=window.wp.editPost.PluginDocumentSettingPanel,e=this.props,n=e.post,i=e.availableUsages,a=this.state.priority,u=n&&n.meta&&n.meta.usage?n.meta.usage:{};return React.createElement(r.Fragment,null,React.createElement(t,{name:"usage-panel",key:"usage-panel",title:Object(o.__)("Usage","wpv-views"),icon:" "},React.createElement("div",null,i.map((function(t){return React.createElement(ct,{key:t.slug,postType:t,usageRow:Object(c.find)(u,(function(e){return e.post_type===t.slug}))})})))),React.createElement(t,{name:"usage-priority",key:"usage-priority",title:Object(o.__)("Priority","wpv-views"),icon:" "},React.createElement("div",{className:"toolset-ct-editor-priority-tab"},React.createElement("span",null,Object(o.__)("There might be multiple templates assigned to the same post type. Set your preferred template priority if a post matches more than one set of conditions.","wpv-views")),React.createElement("br",null),React.createElement("a",{target:"_blank",rel:"noreferrer",className:"is-link",href:"https://toolset.com/course-lesson/assigning-templates-to-posts-conditionally/?utm_source=plugin&utm_medium=gui&utm_campaign=blocks"},Object(o.__)("Learn More","wpv-views"),React.createElement(E.Dashicon,{icon:"external"})),React.createElement("br",null),React.createElement("br",null),React.createElement(E.TextControl,{label:Object(o.__)("Template Priority","wpv-views"),value:a,onChange:this.onChangePriority}),React.createElement("small",null,Object(o.__)("Higher number means higher priority.","wpv-views")))))}}])&&ut(e.prototype,n),i&&ut(e,i),u}(r.Component);function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ht(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function vt(t,e){return(vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Ot(t);if(e){var r=Ot(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return wt(this,n)}}function wt(t,e){return!e||"object"!==bt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vt(t,e)}(a,t);var e,n,i,c=gt(a);function a(){return mt(this,a),c.apply(this,arguments)}return e=a,(n=[{key:"render",value:function(){var t=this.props,e=t.post,n=t.availableUsages,i=t.onChangePostTitle,c=t.onChangePriority;if(null===this.props.post){var a=window.wp.editPost.PluginDocumentSettingPanel;return React.createElement(a,{name:"general-panel",title:Object(o.__)("General","wpv-views"),icon:" "},React.createElement(E.Spinner,null))}return React.createElement(r.Fragment,null,React.createElement(N,{key:"general",post:e,onChangePostTitle:i}),React.createElement(yt,{key:"usage",post:e,availableUsages:n,onChangePriority:c}))}}])&&ht(e.prototype,n),i&&ht(e,i),a}(r.Component);function Pt(t){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Tt(t);if(e){var r=Tt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Ct(this,n)}}function Ct(t,e){return!e||"object"!==Pt(e)&&"function"!=typeof e?Rt(t):e}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kt=window.toolsetDynamicSourcesScriptData,xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(u,t);var e,n,o,a=Et(u);function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this)).setPreviewPostsForUsage=t.setPreviewPostsForUsage.bind(Rt(t)),t}return e=u,(n=[{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentDidUpdate",value:function(t){var e=this.props.usage;Object(c.eq)(e,t.usage)||(this.props.setPostMetaUsage(e),this.setPreviewPostsForUsage(e))}},{key:"setPreviewPostsForUsage",value:function(t){var e=this.props.availableUsages,n=Object(c.filter)(t,(function(t){return!0===t.enabled})).map((function(t){return t.post_type})),o=Object(c.flatten)(e.map((function(e){return void 0!==Object(c.find)(t,(function(t){return t.post_type===e.slug&&t.enabled}))?e.preview_urls:[]})));this.props.setPreviewPosts(o,n)}},{key:"initialize",value:function(){var t=Object(i.select)("core/editor").getCurrentPost();Object(i.dispatch)(g.f).setPost(t),(new Y).fetchAvailableUsages().then((function(t){Object(i.dispatch)(g.f).setAvailableUsages(t)})),wp.data.dispatch("core/edit-post").removeEditorPanel("post-status"),wp.data.dispatch("core/editor").disablePublishSidebar()}},{key:"render",value:function(){var t=this.props,e=t.post,n=t.availableUsages;return React.createElement(r.Fragment,null,React.createElement(_t,{post:e,availableUsages:n,onChangePostTitle:this.props.setPostTitle,onChangePriority:this.props.setPostMetaPriority}))}}])&&jt(e.prototype,n),o&&jt(e,o),u}(r.Component),At=Object(S.compose)(Object(S.withState)({post:null,availableUsages:[]}),Object(i.withSelect)((function(t){var e=t(g.f),n=e.getPost,o=e.getAvailableUsages,r=n();return{post:r,usage:r&&r.meta&&r.meta.usage?r.meta.usage:[],availableUsages:o()}})),Object(i.withDispatch)((function(t){return{setPostMetaUsage:function(e){t("core/editor").editPost({meta:{usage:e}})},setPreviewPosts:function(e,n){t(kt.dynamicSourcesStore).setPreviewPostTypes(n),t(kt.dynamicSourcesStore).setPreviewPosts(e)},setPostMetaPriority:function(e){t("core/editor").editPost({meta:{usage_priority:e}})},setPostTitle:function(e){t("core/editor").editPost({title:e}),t(g.f).setPostTitle(e)}}})))(xt);var Dt="plugin-content-template-panel-sidebar",Nt=function t(){var e,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=function(t){var e=Object(i.select)("core/editor").getCurrentPostType;e()&&void 0!==window.toolsetConditionals?Object(c.isEqual)("view-template",e())&&((0,wp.plugins.registerPlugin)(Dt,{render:At}),window._wpLoadBlockEditor.then((function(){var t=["".concat(Dt,"/general-panel"),"".concat(Dt,"/usage-panel")];for(var e in t){var n=t[e];Object(c.get)(wp.data.select("core/edit-post").getPreference("panels")[n],"opened",!1)||wp.data.dispatch("core/edit-post").toggleEditorPanelOpened(n)}}))):setTimeout(Object(c.partial)(t,t),1)},(n="deferAddingContentSelectionHooks")in(e=this)?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,this.deferAddingContentSelectionHooks(this.deferAddingContentSelectionHooks)};new m,new h,new j,new Nt},3:function(t,e,n){"use strict";n.d(e,"eb",(function(){return o})),n.d(e,"fb",(function(){return r})),n.d(e,"E",(function(){return i})),n.d(e,"D",(function(){return c})),n.d(e,"F",(function(){return a})),n.d(e,"S",(function(){return u})),n.d(e,"N",(function(){return s})),n.d(e,"O",(function(){return l})),n.d(e,"P",(function(){return f})),n.d(e,"Q",(function(){return p})),n.d(e,"R",(function(){return d})),n.d(e,"T",(function(){return y})),n.d(e,"M",(function(){return b})),n.d(e,"z",(function(){return m})),n.d(e,"u",(function(){return h})),n.d(e,"w",(function(){return v})),n.d(e,"s",(function(){return g})),n.d(e,"r",(function(){return w})),n.d(e,"y",(function(){return O})),n.d(e,"A",(function(){return _})),n.d(e,"x",(function(){return P})),n.d(e,"v",(function(){return j})),n.d(e,"B",(function(){return S})),n.d(e,"t",(function(){return E})),n.d(e,"o",(function(){return C})),n.d(e,"p",(function(){return R})),n.d(e,"X",(function(){return T})),n.d(e,"ab",(function(){return k})),n.d(e,"bb",(function(){return x})),n.d(e,"Y",(function(){return A})),n.d(e,"Z",(function(){return D})),n.d(e,"cb",(function(){return N})),n.d(e,"db",(function(){return U})),n.d(e,"g",(function(){return I})),n.d(e,"h",(function(){return M})),n.d(e,"i",(function(){return F})),n.d(e,"H",(function(){return G})),n.d(e,"m",(function(){return H})),n.d(e,"I",(function(){return q})),n.d(e,"n",(function(){return L})),n.d(e,"q",(function(){return B})),n.d(e,"hb",(function(){return Y})),n.d(e,"C",(function(){return V})),n.d(e,"L",(function(){return z})),n.d(e,"K",(function(){return Q})),n.d(e,"U",(function(){return $})),n.d(e,"l",(function(){return J})),n.d(e,"k",(function(){return K})),n.d(e,"j",(function(){return W})),n.d(e,"W",(function(){return X})),n.d(e,"V",(function(){return Z})),n.d(e,"e",(function(){return tt})),n.d(e,"f",(function(){return et})),n.d(e,"gb",(function(){return nt})),n.d(e,"J",(function(){return ot})),n.d(e,"a",(function(){return rt})),n.d(e,"c",(function(){return it})),n.d(e,"d",(function(){return ct})),n.d(e,"b",(function(){return at})),n.d(e,"G",(function(){return ut}));var o=0,r=2,i="paged",c="ajaxed",a="rollover",u="builtin",s="spinner1",l="spinner2",f="spinner3",p="spinner4",d="spinner5",y="uploaded",b="disabled",m="unformatted",h="toolset-grid",v="toolset-masonry",g="bootstrap-grid",w="bootstrap-4-grid",O="table_of_fields",_="un_ordered_list",P="ordered_list",j="separators_list",S="wp_columns",E="collage",C="0",R="1",T="all",k="pagination",x="slider",A="parametric",D="full",N="NUMERIC",U="STRING",I="posts",M="taxonomy",F="users",G="views-editor/preview",H="views-editor/dictionaries",q=700,L=1500,B=700,Y=700,V=500,z="select",Q="list",$="toolset/dynamic-sources",J=(new RegExp("\x3c!--[\\s\\S]*?(?:--\x3e)?\x3c!---+>?|<!(?![dD][oO][cC][tT][yY][pP][eE]|\\[CDATA\\[)[^>]*>?|<[?][^>]*>?","g"),""),K="ajaxrefreshonsubmit",W="ajaxrefreshonchange",X="toolset_use_theme_setting",Z="toolset_use_custom",tt="view-template",et="views/content-template",nt={NAME:1,DESIGN:2,POST_TYPE:3,COLLAGE:4},ot="all",rt="product",it="related",ct="up-sells",at="cross-sells",ut="toolset/view"},31:function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}));var r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"baseUrl","/toolset-views/v1"),o(this,"wpBaseUrl","/wp/v2")}},32:function(t,e){t.exports=window.wp.apiFetch},4:function(t,e){t.exports=window.wp.data},6:function(t,e){t.exports=lodash},8:function(t,e){t.exports=window.wp.compose}});