var toolsetConditionals=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./public_src/index.js")}({"./node_modules/lodash/_Hash.js":function(e,t,n){var o=n("./node_modules/lodash/_hashClear.js"),r=n("./node_modules/lodash/_hashDelete.js"),a=n("./node_modules/lodash/_hashGet.js"),c=n("./node_modules/lodash/_hashHas.js"),s=n("./node_modules/lodash/_hashSet.js");function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}i.prototype.clear=o,i.prototype.delete=r,i.prototype.get=a,i.prototype.has=c,i.prototype.set=s,e.exports=i},"./node_modules/lodash/_ListCache.js":function(e,t,n){var o=n("./node_modules/lodash/_listCacheClear.js"),r=n("./node_modules/lodash/_listCacheDelete.js"),a=n("./node_modules/lodash/_listCacheGet.js"),c=n("./node_modules/lodash/_listCacheHas.js"),s=n("./node_modules/lodash/_listCacheSet.js");function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}i.prototype.clear=o,i.prototype.delete=r,i.prototype.get=a,i.prototype.has=c,i.prototype.set=s,e.exports=i},"./node_modules/lodash/_Map.js":function(e,t,n){var o=n("./node_modules/lodash/_getNative.js")(n("./node_modules/lodash/_root.js"),"Map");e.exports=o},"./node_modules/lodash/_MapCache.js":function(e,t,n){var o=n("./node_modules/lodash/_mapCacheClear.js"),r=n("./node_modules/lodash/_mapCacheDelete.js"),a=n("./node_modules/lodash/_mapCacheGet.js"),c=n("./node_modules/lodash/_mapCacheHas.js"),s=n("./node_modules/lodash/_mapCacheSet.js");function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}i.prototype.clear=o,i.prototype.delete=r,i.prototype.get=a,i.prototype.has=c,i.prototype.set=s,e.exports=i},"./node_modules/lodash/_Symbol.js":function(e,t,n){var o=n("./node_modules/lodash/_root.js").Symbol;e.exports=o},"./node_modules/lodash/_arrayMap.js":function(e,t){e.exports=function(e,t){for(var n=-1,o=null==e?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}},"./node_modules/lodash/_assocIndexOf.js":function(e,t,n){var o=n("./node_modules/lodash/eq.js");e.exports=function(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}},"./node_modules/lodash/_baseGet.js":function(e,t,n){var o=n("./node_modules/lodash/_castPath.js"),r=n("./node_modules/lodash/_toKey.js");e.exports=function(e,t){for(var n=0,a=(t=o(t,e)).length;null!=e&&n<a;)e=e[r(t[n++])];return n&&n==a?e:void 0}},"./node_modules/lodash/_baseGetTag.js":function(e,t,n){var o=n("./node_modules/lodash/_Symbol.js"),r=n("./node_modules/lodash/_getRawTag.js"),a=n("./node_modules/lodash/_objectToString.js"),c=o?o.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":c&&c in Object(e)?r(e):a(e)}},"./node_modules/lodash/_baseIsNative.js":function(e,t,n){var o=n("./node_modules/lodash/isFunction.js"),r=n("./node_modules/lodash/_isMasked.js"),a=n("./node_modules/lodash/isObject.js"),c=n("./node_modules/lodash/_toSource.js"),s=/^\[object .+?Constructor\]$/,i=Function.prototype,u=Object.prototype,l=i.toString,p=u.hasOwnProperty,f=RegExp("^"+l.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||r(e))&&(o(e)?f:s).test(c(e))}},"./node_modules/lodash/_baseToString.js":function(e,t,n){var o=n("./node_modules/lodash/_Symbol.js"),r=n("./node_modules/lodash/_arrayMap.js"),a=n("./node_modules/lodash/isArray.js"),c=n("./node_modules/lodash/isSymbol.js"),s=o?o.prototype:void 0,i=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return r(t,e)+"";if(c(t))return i?i.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},"./node_modules/lodash/_castPath.js":function(e,t,n){var o=n("./node_modules/lodash/isArray.js"),r=n("./node_modules/lodash/_isKey.js"),a=n("./node_modules/lodash/_stringToPath.js"),c=n("./node_modules/lodash/toString.js");e.exports=function(e,t){return o(e)?e:r(e,t)?[e]:a(c(e))}},"./node_modules/lodash/_coreJsData.js":function(e,t,n){var o=n("./node_modules/lodash/_root.js")["__core-js_shared__"];e.exports=o},"./node_modules/lodash/_freeGlobal.js":function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/lodash/_getMapData.js":function(e,t,n){var o=n("./node_modules/lodash/_isKeyable.js");e.exports=function(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}},"./node_modules/lodash/_getNative.js":function(e,t,n){var o=n("./node_modules/lodash/_baseIsNative.js"),r=n("./node_modules/lodash/_getValue.js");e.exports=function(e,t){var n=r(e,t);return o(n)?n:void 0}},"./node_modules/lodash/_getRawTag.js":function(e,t,n){var o=n("./node_modules/lodash/_Symbol.js"),r=Object.prototype,a=r.hasOwnProperty,c=r.toString,s=o?o.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var o=!0}catch(e){}var r=c.call(e);return o&&(t?e[s]=n:delete e[s]),r}},"./node_modules/lodash/_getValue.js":function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},"./node_modules/lodash/_hashClear.js":function(e,t,n){var o=n("./node_modules/lodash/_nativeCreate.js");e.exports=function(){this.__data__=o?o(null):{},this.size=0}},"./node_modules/lodash/_hashDelete.js":function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},"./node_modules/lodash/_hashGet.js":function(e,t,n){var o=n("./node_modules/lodash/_nativeCreate.js"),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(o){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(t,e)?t[e]:void 0}},"./node_modules/lodash/_hashHas.js":function(e,t,n){var o=n("./node_modules/lodash/_nativeCreate.js"),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return o?void 0!==t[e]:r.call(t,e)}},"./node_modules/lodash/_hashSet.js":function(e,t,n){var o=n("./node_modules/lodash/_nativeCreate.js");e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?"__lodash_hash_undefined__":t,this}},"./node_modules/lodash/_isKey.js":function(e,t,n){var o=n("./node_modules/lodash/isArray.js"),r=n("./node_modules/lodash/isSymbol.js"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;e.exports=function(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!r(e))||(c.test(e)||!a.test(e)||null!=t&&e in Object(t))}},"./node_modules/lodash/_isKeyable.js":function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},"./node_modules/lodash/_isMasked.js":function(e,t,n){var o,r=n("./node_modules/lodash/_coreJsData.js"),a=(o=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";e.exports=function(e){return!!a&&a in e}},"./node_modules/lodash/_listCacheClear.js":function(e,t){e.exports=function(){this.__data__=[],this.size=0}},"./node_modules/lodash/_listCacheDelete.js":function(e,t,n){var o=n("./node_modules/lodash/_assocIndexOf.js"),r=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=o(t,e);return!(n<0)&&(n==t.length-1?t.pop():r.call(t,n,1),--this.size,!0)}},"./node_modules/lodash/_listCacheGet.js":function(e,t,n){var o=n("./node_modules/lodash/_assocIndexOf.js");e.exports=function(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}},"./node_modules/lodash/_listCacheHas.js":function(e,t,n){var o=n("./node_modules/lodash/_assocIndexOf.js");e.exports=function(e){return o(this.__data__,e)>-1}},"./node_modules/lodash/_listCacheSet.js":function(e,t,n){var o=n("./node_modules/lodash/_assocIndexOf.js");e.exports=function(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}},"./node_modules/lodash/_mapCacheClear.js":function(e,t,n){var o=n("./node_modules/lodash/_Hash.js"),r=n("./node_modules/lodash/_ListCache.js"),a=n("./node_modules/lodash/_Map.js");e.exports=function(){this.size=0,this.__data__={hash:new o,map:new(a||r),string:new o}}},"./node_modules/lodash/_mapCacheDelete.js":function(e,t,n){var o=n("./node_modules/lodash/_getMapData.js");e.exports=function(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}},"./node_modules/lodash/_mapCacheGet.js":function(e,t,n){var o=n("./node_modules/lodash/_getMapData.js");e.exports=function(e){return o(this,e).get(e)}},"./node_modules/lodash/_mapCacheHas.js":function(e,t,n){var o=n("./node_modules/lodash/_getMapData.js");e.exports=function(e){return o(this,e).has(e)}},"./node_modules/lodash/_mapCacheSet.js":function(e,t,n){var o=n("./node_modules/lodash/_getMapData.js");e.exports=function(e,t){var n=o(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}},"./node_modules/lodash/_memoizeCapped.js":function(e,t,n){var o=n("./node_modules/lodash/memoize.js");e.exports=function(e){var t=o(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},"./node_modules/lodash/_nativeCreate.js":function(e,t,n){var o=n("./node_modules/lodash/_getNative.js")(Object,"create");e.exports=o},"./node_modules/lodash/_objectToString.js":function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},"./node_modules/lodash/_root.js":function(e,t,n){var o=n("./node_modules/lodash/_freeGlobal.js"),r="object"==typeof self&&self&&self.Object===Object&&self,a=o||r||Function("return this")();e.exports=a},"./node_modules/lodash/_stringToPath.js":function(e,t,n){var o=n("./node_modules/lodash/_memoizeCapped.js"),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,c=o((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,(function(e,n,o,r){t.push(o?r.replace(a,"$1"):n||e)})),t}));e.exports=c},"./node_modules/lodash/_toKey.js":function(e,t,n){var o=n("./node_modules/lodash/isSymbol.js");e.exports=function(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},"./node_modules/lodash/_toSource.js":function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},"./node_modules/lodash/eq.js":function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},"./node_modules/lodash/get.js":function(e,t,n){var o=n("./node_modules/lodash/_baseGet.js");e.exports=function(e,t,n){var r=null==e?void 0:o(e,t);return void 0===r?n:r}},"./node_modules/lodash/isArray.js":function(e,t){var n=Array.isArray;e.exports=n},"./node_modules/lodash/isFunction.js":function(e,t,n){var o=n("./node_modules/lodash/_baseGetTag.js"),r=n("./node_modules/lodash/isObject.js");e.exports=function(e){if(!r(e))return!1;var t=o(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},"./node_modules/lodash/isObject.js":function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},"./node_modules/lodash/isObjectLike.js":function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},"./node_modules/lodash/isSymbol.js":function(e,t,n){var o=n("./node_modules/lodash/_baseGetTag.js"),r=n("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==o(e)}},"./node_modules/lodash/memoize.js":function(e,t,n){var o=n("./node_modules/lodash/_MapCache.js");function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],a=n.cache;if(a.has(r))return a.get(r);var c=e.apply(this,o);return n.cache=a.set(r,c)||a,c};return n.cache=new(r.Cache||o),n}r.Cache=o,e.exports=r},"./node_modules/lodash/toString.js":function(e,t,n){var o=n("./node_modules/lodash/_baseToString.js");e.exports=function(e){return null==e?"":o(e)}},"./node_modules/prop-types/factoryWithThrowingShims.js":function(e,t,n){"use strict";var o=n("./node_modules/prop-types/lib/ReactPropTypesSecret.js");function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,c){if(c!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},"./node_modules/prop-types/index.js":function(e,t,n){e.exports=n("./node_modules/prop-types/factoryWithThrowingShims.js")()},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"./node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./public_src/components/conditionals/scss/edit.scss":function(e,t,n){},"./public_src/components/conditionals/utils/views-shortcode.js":function(e,t){var n=window.Toolset;n&&n.hooks&&n.hooks.addFilter("wpv-filter-wpv-shortcodes-gui-before-do-action",(function(e){return e}))},"./public_src/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,"Editor",(function(){return de})),n.d(t,"AdvancedEditor",(function(){return mt})),n.d(t,"shortcodeGenerator",(function(){return be})),n.d(t,"conditionSummary",(function(){return Nt})),n.d(t,"conditionsTokenizer",(function(){return ct})),n.d(t,"assureNotEmptyConditions",(function(){return te})),n.d(t,"ShortcodeWrapper",(function(){return Bt})),n.d(t,"incompleteConditions",(function(){return ht})),n.d(t,"ConditionalsModal",(function(){return xt})),n.d(t,"PostFieldCondition",(function(){return On})),n.d(t,"EMPTY_POST_FIELD_CONDITION",(function(){return jn}));n("./public_src/components/conditionals/scss/edit.scss");var o=n("./node_modules/lodash/get.js"),r=n.n(o),a=n("@wordpress/i18n"),c=n("@wordpress/element"),s=n("@wordpress/components"),i=n("toolset/block/control"),u=n("@wordpress/hooks"),l=n("@wordpress/api-fetch"),p=n.n(l),f=n("ToolsetDynamicSources");function d(e){return e&&e.constructor===Object?JSON.parse(JSON.stringify(e)):e}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=j(e);if(t){var r=j(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=window.toolsetDynamicSourcesScriptData,R={provider:"__current_post",source:null,field:null,customPost:null},E=[{value:"wpv-archive-title",label:Object(a.__)("Archive title","wpv-views")},{value:"wpv-bloginfo",label:Object(a.__)("Site information","wpv-views"),extra:[{value:"",label:Object(a.__)("Select a blog info","wpv-views")},{value:'show="name"',label:Object(a.__)("Site title","wpv-views")},{value:'show="description"',label:Object(a.__)("Site tagline","wpv-views")},{value:'show="url"',label:Object(a.__)("Site URL","wpv-views")},{value:'show="admin_email"',label:Object(a.__)("E-mail address","wpv-views")},{value:'show="charset"',label:Object(a.__)("Encoding for pages","wpv-views")},{value:'show="version"',label:Object(a.__)("WordPress version","wpv-views")},{value:'show="html_type"',label:Object(a.__)("Content-Type of WordPress HTML pages","wpv-views")},{value:'show="text_direction"',label:Object(a.__)("Text direction","wpv-views")},{value:'show="language"',label:Object(a.__)("Language of WordPress","wpv-views")},{value:'show="stylesheet_url"',label:Object(a.__)("Primary CSS URL","wpv-views")},{value:'show="stylesheet_directory"',label:Object(a.__)("Primary CSS directory","wpv-views")},{value:'show="template_url"',label:Object(a.__)("Theme's URL","wpv-views")},{value:'show="pingback_url"',label:Object(a.__)("Pingback XML-RPC file URL","wpv-views")},{value:'show="atom_url"',label:Object(a.__)("Atom feed URL","wpv-views")},{value:'show="rdf_url"',label:Object(a.__)("RDF/RSS 1.0 feed URL","wpv-views")},{value:'show="rss_url"',label:Object(a.__)("RSS 0.92 feed URL","wpv-views")},{value:'show="rss2_url"',label:Object(a.__)("RSS 2.0 feed URL","wpv-views")},{value:'show="comments_atom_url"',label:Object(a.__)("Comments Atom feed URL","wpv-views")},{value:'show="comments_rss2_url"',label:Object(a.__)("Comments RSS 2.0 feed URL","wpv-views")}]},{value:"wpv-found-count",label:Object(a.__)("Number of items found in Views","wpv-views")},{value:"wpv-items-count",label:Object(a.__)("Number of items displayed on the page","wpv-views")},{value:"wpv-loop-index",label:Object(a.__)("Current index in the Views loop","wpv-views")},{value:"wpv-search-term",label:Object(a.__)("Search term","wpv-views")}],S=[{label:Object(a.__)("Post data","wpv-views"),value:"post"},{label:Object(a.__)("Static value","wpv-views"),value:"value"},{label:Object(a.__)("Views Shortcode","wpv-views"),value:"views_shortcode"},{label:Object(a.__)("Custom Shortcode","wpv-views"),value:"custom_shortcode"},{label:Object(a.__)("Custom function","wpv-views"),value:"function"},{label:Object(a.__)("Current user ID","wpv-views"),value:"current_user"},{label:Object(a.__)("Current user role","wpv-views"),value:"current_role"},{label:Object(a.__)("Other user","wpv-views"),value:"custom_user"},{label:Object(a.__)("Other role","wpv-views"),value:"custom_role"},{label:Object(a.__)("Date function","wpv-views"),value:"date"}],C={current_role:Object(a.__)("The field returns the role slug of the logged-in user, e.g. administrator","toolsetblocks")},P=[{label:Object(a.__)("Now","wpv-views"),value:"now"},{label:Object(a.__)("Today","wpv-views"),value:"today"},{label:Object(a.__)("Future Day","wpv-views"),value:"future_day",extra:[{name:"extra",placeholder:Object(a.__)("Number of days","wpv-views")}]},{label:Object(a.__)("Past Day","wpv-views"),value:"past_day",extra:[{name:"extra",placeholder:Object(a.__)("Number of days","wpv-views")}]},{label:Object(a.__)("This Month","wpv-views"),value:"this_month"},{label:Object(a.__)("Future Month","wpv-views"),value:"future_month",extra:[{name:"extra",placeholder:Object(a.__)("Number of months","wpv-views")}]},{label:Object(a.__)("Past Month","wpv-views"),value:"past_month",extra:[{name:"extra",placeholder:Object(a.__)("Number of months","wpv-views")}]},{label:Object(a.__)("This Year","wpv-views"),value:"this_year"},{label:Object(a.__)("Future Year","wpv-views"),value:"future_year",extra:[{name:"extra",placeholder:Object(a.__)("Number of years","wpv-views")}]},{label:Object(a.__)("Past Year","wpv-views"),value:"past_year",extra:[{name:"extra",placeholder:Object(a.__)("Number of years","wpv-views")}]},{label:Object(a.__)("Seconds from Now","wpv-views"),value:"seconds_from_now",extra:[{name:"extra",placeholder:Object(a.__)("Number of seconds","wpv-views")}]},{label:Object(a.__)("Months from Now","wpv-views"),value:"months_from_now",extra:[{name:"extra",placeholder:Object(a.__)("Number of months","wpv-views")}]},{label:Object(a.__)("Years from Now","wpv-views"),value:"years_from_now",extra:[{name:"extra",placeholder:Object(a.__)("Number of years","wpv-views")}]},{label:Object(a.__)("Custom Date","wpv-views"),value:"date",extra:[{name:"extra",placeholder:Object(a.__)("Date (DD, MM, YYYY)","wpv-views"),match:"^([0-2]?[0-9]|3[0-1]),\\s*(0?[0-9]|1[0-2]),\\s*(\\d{4})$",matchInfo:"DD, MM, YYYY"}]}],k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(l,e);var t,n,o,r=g(l);function l(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),O(y(t=r.call(this,e)),"reactSelectStyles",{menu:function(e){return h(h({},e),{},{position:"relative"})},input:function(e,t){return h(h({},e),{},{"& input:focus":{boxShadow:(t.isFocused,"none !important")}})}}),O(y(t),"filterSource",(function(e,n){if(t.props.isDateFunction&&n===t.props.componentId){var o=d(e);return Object.keys(o).forEach((function(e){var t=o[e].find((function(e){return"post"===e.id}));t&&(t.options=t.options.filter((function(e){return!["post-date","post-date-gmt","post-date-modified","post-date-modified-gmt"].includes(e.value)})))})),o}return e})),!e.udpateConditionCallback)throw new Error("You must set udpateConditionCallback for <Condition />");return t.statelessProps=d(e),Object(u.addFilter)("tb.dynamicSources.filters.adjustSourcesForBlocks",t.getFilterNamespace(),t.filterSource),t.state={error:!1},t}return t=l,(n=[{key:"getFilterNamespace",value:function(){return"argument-".concat(this.props.componentId)}},{key:"componentDidUpdate",value:function(){this.statelessProps=d(this.props),Object(u.removeFilter)("tb.dynamicSources.filters.adjustSourcesForBlocks",this.getFilterNamespace()),Object(u.addFilter)("tb.dynamicSources.filters.adjustSourcesForBlocks",this.getFilterNamespace(),this.filterSource)}},{key:"getDSAttributes",value:function(){var e=this,t=this.statelessProps.source.value||R;return{label:Object(a.__)("Select a condition source","wpv-views"),toggleHide:!0,condition:!0,postProvider:t.provider,source:t.source,field:t.field,customPost:t.customPost,category:"text",fieldSelectedCallback:function(t){e.setSourceField(t)},sourceContentFetchedCallback:function(){}}}},{key:"getExtraFieldData",value:function(e){var t={is_repetitive:!1,is_created_by_types:!1};if(!e||e.constructor!==Object)return t;var n=!!e.provider&&("__custom_post"===e.provider&&e.customPost&&e.customPost.value?e.customPost.value:e.provider);if(n&&x.dynamicSources[n]){var o=x.dynamicSources[n].filter((function(e){return"toolset"===e.id}));if(o.length&&o[0].options){var r=o[0].options.filter((function(t){return t.value===e.source}));if(r.length&&r[0].fields){var a=r[0].fields.filter((function(t){return t.value===e.field}));a.length&&(t.is_repetitive=!!a[0].is_repetitive,t.is_created_by_types=!!a[0].is_created_by_types)}}}return t}},{key:"setSourceField",value:function(e){var t=this;if(null!==e){var n=e;n.provider=n.postProvider,delete n.postProvider;var o,r=Object.assign({},this.statelessProps.source.value,n);JSON.stringify(r)!==JSON.stringify(this.props.source.value)&&(o=h(h({},r),this.getExtraFieldData(r)),t.statelessProps.source.value=o,t.props.udpateConditionCallback(t.statelessProps.source))}}},{key:"setConditionElement",value:function(e,t){var n=d(this.props.source);if(n[e]=t,"source"===e?(n.value="",n.extra=""):"value"===e&&(n.extra=""),this.props.udpateConditionCallback(n),this.statelessProps.source=n,t&&"extra"===e&&"date"===n.source.value){var o=P.find((function(e){return e.value===n.value.value}));if(o.extra){var r=o.extra.find((function(e){return!!e.match&&!t.match(new RegExp(e.match))}));r?(this.props.onError(r.matchInfo),this.setState({error:r.matchInfo})):(this.props.onError(!1),this.setState({error:!1}))}}}},{key:"loadUsers",value:function(e){return new Promise((function(t){p()({path:"/wp/v2/users?search="+e}).then((function(e){var n=e.map((function(e){return{label:e.name,value:e.id}}));t(n)}))}))}},{key:"render",value:function(){var e=this,t=window.toolsetBlocksStrings,n=this.props,o=n.componentId,r=n.isPostDate,u=n.parentId,l=n.isOtherTaxonomy,p=this.props.source,d=p.source,v=p.value,m=p.extra,h="views_shortcode"===d.value&&E.find((function(e){return e.value===v.value&&!!e.extra})),_=(t?t.extra.viewsAllowedFunctions:[]).map((function(e){return{value:e,label:e}})),b=(t?t.extra.viewsAllowedShortcodes:[]).map((function(e){return{value:e,label:e}})),g="date"===d.value&&P.find((function(e){return e.value===v.value})),w=S.filter((function(e){return!r||"date"!==e.value}));return React.createElement("div",null,this.state.error&&React.createElement(s.Notice,{status:"error",isDismissible:!1},Object(a.__)("Please, enter a valida data: ","wpv-views")+this.state.error),React.createElement(s.BaseControl,null,React.createElement(i.Select,{placeholder:Object(a.__)("Select...","wpv-views"),styles:this.reactSelectStyles,value:d.constructor===Object?d:null,options:w,onChange:function(t){return e.setConditionElement("source",t)}})),d&&!!d.value&&!!C[d.value]&&React.createElement(s.BaseControl,null,React.createElement("p",{className:"components-base-control__help"},C[d.value])),"post"===d.value&&React.createElement(f.DynamicSourceUnified,{dynamicSourcesEligibleAttribute:this.getDSAttributes(),hideLabels:!0,clientId:u,componentId:o}),"post"===d.value&&!!v.source&&"post-taxonomies"===v.source&&React.createElement(s.BaseControl,null,React.createElement("p",{className:"components-base-control__help"},Object(a.__)("This field returns taxonomy slugs","wpv-views"))),"value"===d.value&&React.createElement(s.BaseControl,null,React.createElement(s.TextControl,{value:v,onChange:function(t){return e.setConditionElement("value",t)},placeholder:l?Object(a.__)("Enter taxonomy slug","wpv-views"):Object(a.__)("Value","wpv-views")})),"function"===d.value&&React.createElement(c.Fragment,null,React.createElement(s.Notice,{status:"warning",isDismissible:!1},Object(a.__)("Functions need to be registered in Toolset -> Settings -> Front-end Content","wpv-views")),React.createElement(s.BaseControl,null,React.createElement(i.Select,{placeholder:Object(a.__)("Select a function...","wpv-views"),styles:this.reactSelectStyles,value:v.constructor===Object?v:null,options:_,onChange:function(t){return e.setConditionElement("value",t)}})),!!v&&!!v.value&&React.createElement(s.BaseControl,null,React.createElement(s.TextControl,{help:Object(a.__)("Comma separated values...","wpv-views"),value:m,onChange:function(t){return e.setConditionElement("extra",t)},placeholder:Object(a.__)("Parameters","wpv-views")}))),"custom_shortcode"===d.value&&React.createElement(c.Fragment,null,React.createElement(s.Notice,{status:"warning",isDismissible:!1},Object(a.__)("Shortcodes need to be registered in Toolset -> Settings -> Front-end Content","wpv-views")),React.createElement(s.BaseControl,null,React.createElement(i.Select,{placeholder:Object(a.__)("Select a shortcode...","wpv-views"),styles:this.reactSelectStyles,value:v.constructor===Object?v:null,options:b,onChange:function(t){return e.setConditionElement("value",t)}})),!!v&&!!v.value&&React.createElement(s.BaseControl,null,React.createElement(s.TextControl,{placeholder:Object(a.__)("Shortcode attributes","wpv-views"),value:m,onChange:function(t){return e.setConditionElement("extra",t)}}))),"views_shortcode"===d.value&&React.createElement(s.BaseControl,null,React.createElement(i.Select,{placeholder:Object(a.__)("Select a Views shortcode...","wpv-views"),styles:this.reactSelectStyles,value:v.constructor===Object?v:null,options:E,onChange:function(t){return e.setConditionElement("value",{value:t.value,label:t.label})}})),"views_shortcode"===d.value&&"wpv-search-term"===v.value&&React.createElement(s.BaseControl,null,React.createElement("p",{className:"components-base-control__help"},Object(a.__)("Returns the search value in the search results page of this site.","wpv-views"))),h&&React.createElement(s.BaseControl,null,React.createElement(i.Select,{styles:this.reactSelectStyles,value:m.constructor===Object?m:null,options:h.extra,onChange:function(t){return e.setConditionElement("extra",t)}})),"custom_user"===d.value&&React.createElement(s.BaseControl,null,React.createElement(i.AsyncSelect,{placeholder:Object(a.__)("Search an user...","wpv-views"),styles:this.reactSelectStyles,loadOptions:this.loadUsers.bind(this),defaultValue:v,onChange:function(t){return e.setConditionElement("value",t)}})),"custom_role"===d.value&&!!t&&React.createElement(s.BaseControl,null,React.createElement(i.Select,{placeholder:Object(a.__)("Select a role...","wpv-views"),styles:this.reactSelectStyles,value:v.constructor===Object?v:null,options:t.extra.listRoles,onChange:function(t){return e.setConditionElement("value",t)}})),"date"===d.value&&React.createElement(s.BaseControl,null,React.createElement(i.Select,{placeholder:Object(a.__)("Select a function...","wpv-views"),styles:this.reactSelectStyles,value:g&&g.constructor===Object?g:null,options:P,onChange:function(t){return e.setConditionElement("value",t)}})),"date"===d.value&&g&&!!g.extra&&g.extra.map((function(t,n){return React.createElement(s.BaseControl,{key:"extra-".concat(n)},React.createElement(s.TextControl,{placeholder:g?g.extra[0].placeholder:"",value:m,onChange:function(t){return e.setConditionElement("extra",t)}}))})))}}])&&_(t.prototype,n),o&&_(t,o),l}(c.Component),A=function(e){return!!e.value.source&&"post-taxonomies"===e.value.source||!!e.value.type&&"taxonomy"===e.value.type},T=function(e){return e.value.constructor===Object&&!!e.value.is_repetitive};function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=B(e);if(t){var r=B(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return V(this,n)}}function V(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?G(e):t}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L={default:[{label:"=",value:"eq"},{label:">=",value:"gte"},{label:">",value:"gt"},{label:"<=",value:"lte"},{label:"<",value:"lt"},{label:"!=",value:"ne"},{label:Object(a.__)("Empty value","wpv-views"),value:"empty"}],taxonomies:[{label:"Contains",value:"contains"},{label:"Not contains",value:"not_contains"},{label:Object(a.__)("Empty value","wpv-views"),value:"empty"}],equivalent:[{value:"eq",label:"="},{value:"gte",label:">="},{value:"gt",label:">"},{value:"lte",label:"<="},{value:"lt",label:"<"},{value:"ne",label:"!="}]},z={firstArgument:{source:"post",value:R},operator:L.default[0],secondArgument:{source:"value",value:""}},q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(s,e);var t,n,o,r=U(s);function s(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),$(G(t=r.call(this,e)),"reactSelectStyles",{menu:function(e){return I(I({},e),{},{position:"relative"})},placeholder:function(e){return I(I({},e),{},{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},input:function(e,t){return I(I({},e),{},{"& input:focus":{boxShadow:(t.isFocused,"none !important")}})}}),!e.udpateConditionCallback)throw new Error("You must set udpateConditionCallback for <Condition />");return t}return t=s,(n=[{key:"setConditionElement",value:function(e,t){var n=this.props.condition;n[e]=t,"operator"===e&&"empty"===t.value&&(n.secondArgument=d(z.secondArgument));var o=L.taxonomies.find((function(e){return e.value===n.operator.value}));"operator"===e||!T(t)&&!A(t)||o||(n.operator=d(L.taxonomies[0])),this.props.udpateConditionCallback(d(n))}},{key:"render",value:function(){var e=this,t=this.props,n=t.condition,o=t.componentId,r=t.parentId,s=t.onError,u=L,l=A(n.firstArgument)||A(n.secondArgument)||T(n.firstArgument)||T(n.secondArgument)?u.taxonomies:u.default,p=!!n.firstArgument.source&&"date"===n.firstArgument.source.value,f=!!n.firstArgument.value&&!!n.firstArgument.value.source&&["post-date","post-date-gmt","post-date-modified","post-date-modified-gmt"].includes(n.firstArgument.value.source),d="".concat(o,"-first")+("post"===n.firstArgument.source.value?(new Date).getTime():""),v="".concat(o,"-second")+("post"===n.secondArgument.source.value?(new Date).getTime():""),m=function(e){var t=e.source,n=e.value;return"post"===t.value&&!!n.source&&"post-taxonomies"===n.source};return React.createElement(c.Fragment,null,React.createElement(k,{key:d,source:n.firstArgument,udpateConditionCallback:function(t){return e.setConditionElement("firstArgument",t)},componentId:d,isDateFunction:!1,isPostDate:!1,parentId:r,isOtherTaxonomy:m(n.secondArgument),onError:s}),React.createElement("div",{className:"tb-condition__operator"},React.createElement(i.Select,{styles:this.reactSelectStyles,placeholder:Object(a.__)("Select an option","wpv-views"),value:n.operator,options:l,onChange:function(t){return e.setConditionElement("operator",t)}})),"empty"!==n.operator.value&&React.createElement(k,{key:v,source:n.secondArgument,udpateConditionCallback:function(t){return e.setConditionElement("secondArgument",t)},componentId:v,isDateFunction:p,isPostDate:f,parentId:r,isOtherTaxonomy:m(n.firstArgument),onError:s}))}}])&&M(t.prototype,n),o&&M(t,o),s}(c.Component),Y=React.createElement(s.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},React.createElement("g",{transform:"scale(1.6)"},React.createElement(s.Path,{d:"M18 0H2C.9 0 0 .9 0 2v16c0 1.1.9 2 2 2H18c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zM7 5.1c.3-.4.9-.4 1.2-.1.1.1.2.3.2.5 0 .3-.1.5-.3.7-.2.2-.4.3-.6.3-.2 0-.4-.1-.5-.2-.2-.2-.2-.4-.2-.6 0-.2.1-.4.2-.6zm-1.2 8.5c-.2 0-.4-.1-.5-.2-.2-.1-.3-.3-.3-.6 0-.6.3-1.9 1-4l-.7.7-.1.1-.7-.5.2-.2c.4-.5.9-.8 1.2-1.1.7-.4 1.2-.4 1.5-.2.1.1.2.3.2.4 0 .1 0 .2-.4 1.6-.5 1.6-.6 2.3-.7 2.6.1-.1.4-.3.8-.7l.2-.2.6.6-.2.2c-.6.6-1 .9-1.3 1.1-.4.3-.6.4-.8.4zm10.4-8.4c-.1.1-.3.2-.5.2s-.5 0-.9-.1c-.2 0-.3-.1-.4-.1-.2 0-.4.1-.6.4-.2.3-.4.8-.5 1.3L13.1 8h1.7l-.2 1h-1.7l-1 3.9c-.3 1.3-.8 2.3-1.6 2.9-.7.7-1.5 1-2.4 1-.3 0-.6-.1-.8-.2-.2-.2-.3-.4-.3-.6 0-.2.1-.4.2-.5.1-.1.3-.2.6-.2H8c.7.1 1.3.1 1.6-.2.1-.1.3-.4.5-1.3l1.2-4.9H9.8l.2-1h1.5c.2-1 .5-1.7.8-2.3.3-.6.8-1 1.4-1.3.6-.3 1.1-.5 1.6-.5.3 0 .6.1.7.2.2.2.3.4.3.6.1.3.1.4-.1.6z",fill:"#666"}))),H=React.createElement(s.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},React.createElement("g",{transform:"scale(1.6)"},React.createElement(s.Path,{d:"M13.5 0h-12C.675 0 0 .675 0 1.5v12c0 .825.675 1.5 1.5 1.5h12c.825 0 1.5-.675 1.5-1.5v-12c0-.825-.675-1.5-1.5-1.5zM5.25 3.825c.225-.3.675-.3.9-.075.075.075.15.225.15.375a.68.68 0 0 1-.225.525c-.15.15-.3.225-.45.225-.15 0-.3-.075-.375-.15-.15-.15-.15-.3-.15-.45 0-.15.075-.3.15-.45zm-.9 6.375c-.15 0-.3-.075-.375-.15-.15-.075-.225-.225-.225-.45 0-.45.225-1.425.75-3l-.525.525L3.9 7.2l-.525-.375.15-.15c.3-.375.675-.6.9-.825.525-.3.9-.3 1.125-.15.075.075.15.225.15.3 0 .075 0 .15-.3 1.2-.375 1.2-.45 1.725-.525 1.95.075-.075.3-.225.6-.525l.15-.15.45.45-.15.15c-.45.45-.75.675-.975.825-.3.225-.45.3-.6.3zm7.8-6.3c-.07.08-.225.15-.375.15s-.375 0-.675-.075c-.131-.034-.225-.075-.3-.075-.15 0-.3.075-.45.3-.15.225-.3.6-.375.975L9.825 6H11.1l-.15.75H9.675l-.75 2.925c-.225.975-.6 1.725-1.2 2.175a2.438 2.438 0 0 1-1.8.75c-.225 0-.45-.075-.6-.15-.15-.15-.225-.3-.225-.45 0-.15.075-.3.15-.375.075-.075.225-.15.45-.15H6c.525.075.975.075 1.2-.15.075-.075.225-.3.375-.975l.9-3.675H7.35l.15-.75h1.125c.15-.75.375-1.275.6-1.725s.6-.75 1.05-.975c.45-.225.825-.375 1.2-.375.225 0 .45.075.525.15.15.15.231.294.251.443.038.235.012.33-.101.457z",fill:"#666"}),React.createElement(s.Path,{d:"M18.5 5h-.96v10.922a1.5 1.5 0 0 1-1.5 1.5H5V18.5c0 .825.675 1.5 1.5 1.5h12c.825 0 1.5-.675 1.5-1.5v-12c0-.825-.675-1.5-1.5-1.5z",fill:"#666"})));function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Z(e);if(t){var r=Z(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return X(this,n)}}function X(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(c,e);var t,n,o,r=K(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=r.call(this,e)).state={showPopover:!1},t}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.state.showPopover,n="tb-condition__appender",o=[n];return(this.props.forceVisible||t)&&o.push("".concat(n,"--visible")),React.createElement("div",{className:o.join(" ")},React.createElement("div",{className:"".concat(n,"__button")},React.createElement(s.Tooltip,{text:Object(a.__)("Add condition or group","wpv-views")},React.createElement(s.IconButton,{icon:"insert",onClick:function(){return e.setState({showPopover:!t})}})),t&&React.createElement(s.Popover,{className:"".concat(n,"__popover"),position:"top center",onClickOutside:function(){return e.setState({showPopover:!1})}},React.createElement(s.Button,{onClick:function(){e.props.onAddNewCondition(),e.setState({showPopover:!1})}},React.createElement("div",null,Y),Object(a.__)("Condition","wpv-views")),React.createElement(s.Button,{onClick:function(){e.props.onAddNewGroup(),e.setState({showPopover:!1})}},React.createElement("div",null,H),Object(a.__)("(Group)","wpv-views")))))}}])&&W(t.prototype,n),o&&W(t,o),c}(c.Component),te=function(e,t){return!e&&t?d(t):(e&&e.conditions||(e={conditions:[]}),e&&!e.conditions.length&&(e.conditions=[d(t.conditions[0])]),e)};function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function ae(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ue(e);if(t){var r=ue(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ie(this,n)}}function ie(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var le={logic:{operator:"AND",conditions:[],negative:!1}},pe=function(e){var t=d(le);return t.logic.conditions.push(d(fe(e))),t},fe=function(e){return r()(e,"defaultCondition",!1)?e.defaultCondition:z},de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(u,e);var t,n,o,i=se(u);function u(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),t=i.call(this,e),!e.udpateConditionsCallback)throw new Error("You must set udpateConditionsCallback for <Condition />");return t.state={draggingIndex:null},t}return t=u,(n=[{key:"updateCondition",value:function(e,t){var n=this.props.logic;n.conditions[t]=e,this.props.udpateConditionsCallback(d(n))}},{key:"updateOperator",value:function(e){var t=this.props.logic;t.operator!==e&&(t.operator=e,this.props.udpateConditionsCallback(t))}},{key:"updateNegative",value:function(e){var t=this.props.logic;t.negative!==e&&(t.negative=e,this.props.udpateConditionsCallback(t))}},{key:"addNewCondition",value:function(e){var t=this.props,n=t.logic,o=t.configuration;n.conditions.splice(e,0,d(fe(o))),this.props.udpateConditionsCallback(n)}},{key:"addNewGroup",value:function(e){var t=this.props,n=t.logic,o=t.udpateConditionsCallback,r=t.configuration,a=d(pe(r).logic);a.conditions.push(d(fe(r))),n.conditions.splice(e,0,a),o(n)}},{key:"isVisibleTrash",value:function(){var e=this.props,t=e.logic;return!(!e.parentPath.length&&1===t.conditions.length)}},{key:"deleteCondition",value:function(e){var t=this.props,n=t.logic,o=t.udpateConditionsCallback,r=t.onDeleteGrop;n.conditions=n.conditions.filter((function(t,n){return n!==e})),o(n),n.conditions.length||r()}},{key:"renderCondition",value:function(e,t){var n=this,o=this.props,i=o.logic,l=o.moveConditionsCallback,p=o.onDragStart,f=o.onDragStop,d=o.onMoveDown,v=o.onMoveUp,m=o.parentPath,h=o.componentId,_=o.parentId,b=o.onError,g=o.configuration,w=i.conditions,y=React.createElement(ee,{forceVisible:!m.length&&w.length<2&&!w[0].conditions,onAddNewCondition:function(){return n.addNewCondition(t+1)},onAddNewGroup:function(){return n.addNewGroup(t+1)}}),j=r()(g,"type",q);return e.conditions?React.createElement(c.Fragment,null,React.createElement(u,{logic:te(e,pe(g).logic),configuration:g,udpateConditionsCallback:function(e){n.updateCondition(e,t)},parentPath:[].concat(oe(m),[t]),componentId:"".concat(h,"-").concat([].concat(oe(m),[t]).join("-")),moveConditionsCallback:l,onDragStart:p,onDragEnd:f,onMoveDown:d,onMoveUp:v,onDeleteGrop:function(){return n.deleteCondition(t)},parentId:_,onError:b}),y):React.createElement("div",{className:"tb-condition__condition"},React.createElement("div",{className:"tb-condition__condition__toggler"},React.createElement("div",{className:"tb-condition__condition__arguments"},React.createElement(j,{condition:e,configuration:g,udpateConditionCallback:function(e){n.updateCondition(e,t)},componentId:"".concat(h,"-condition-").concat(t),parentId:_,onError:b}))),React.createElement("div",null,this.isVisibleTrash()&&React.createElement(s.Tooltip,{text:Object(a.__)("Delete condition","wpv-views")},React.createElement(s.Button,{className:"tb-condition__action--delete",onClick:function(){return n.deleteCondition(t)}},React.createElement(s.Dashicon,{icon:"trash"})))),y)}},{key:"renderGroup",value:function(){var e=this,t=this.props,n=t.logic,o=t.parentPath,r=n.conditions,i=n.operator,u=n.negative,l={AND:Object(a.__)("AND","wpv-views"),OR:Object(a.__)("OR","wpv-views")},p="tb-condition__group",f="tb-condition-group_"+o.join("_");return React.createElement("div",{className:p},React.createElement("div",{className:"".concat(p,"__header")},n.conditions.length>1&&React.createElement(s.ButtonGroup,null,Object.keys(l).map((function(t){return React.createElement(s.Button,{key:"operator-".concat(t),variant:t===i?"primary":"secondary",onClick:function(){return e.updateOperator(t)}},l[t])}))),React.createElement(s.Tooltip,{className:"tb-tooltip",text:Object(a.__)("This switch allows to use condition as a negative (NOT)","wpv-views")},React.createElement("div",null,React.createElement(s.ToggleControl,{label:Object(a.__)("NOT","wpv-views"),checked:u,onChange:function(t){return e.updateNegative(t)},className:"tb-condition__toggle"})))),React.createElement("div",{className:"".concat(p,"__content")},r.filter((function(e){return null!==e})).map((function(t,n){var o="".concat(f,"-").concat(n);return React.createElement(c.Fragment,{key:"condition-".concat(n)},React.createElement("div",{className:"".concat(p,"__row")},React.createElement("div",{id:o},e.renderCondition(t,n))))}))))}},{key:"render",value:function(){return this.props.loading?React.createElement("div",{className:"wp-block-embed is-loading"},React.createElement(s.Spinner,null),React.createElement("p",null,Object(a.__)("Updating blocks..."))):React.createElement(c.Fragment,null,this.renderGroup())}}])&&ae(t.prototype,n),o&&ae(t,o),u}(c.Component),ve=n("./node_modules/prop-types/index.js"),me=n.n(ve),he=function(e){var t=function(e,t){var n={"post-content":'wpv-post-body view_template="None"',"post-date":"wpv-post-date","post-date-gmt":"wpv-post-date","post-date-modified":'wpv-post-date type="modified"',"post-date-modified-gmt":'wpv-post-date type="modified"',"post-id":"wpv-post-id","post-name":"wpv-post-slug","post-status":"wpv-post-status","post-title":"wpv-post-title","post-title-with-link":"wpv-post-link","post-type":"wpv-post-type","post-url":"wpv-post-url","post-excerpt":"wpv-post-excerpt","author-id":'wpv-post-author format="meta" meta="ID"',"media-featured-image-data":'wpv-post-featured-image size="full" output="url"',"comments-number":"wpv-post-comments-number"};if(n[e])return n[e];var o=t.value.is_created_by_types?"wpcf-".concat(e):e;return t.value.source.match(/toolset_custom_field/)?o:'wpv-post-field name="'.concat(e,'"')};switch(e.source.value){case"post":var n=function(e){if(e.constructor!==Object||!e.provider)return"";var t=/^custom_post_type\|([^\|]+)\|(\d+)$/,n=e.provider.match(/^toolset_relationship\|([^\|]+)\|(parent|child)$/),o=e.provider.match(t);if("__current_post"===e.provider)return"";if("__custom_post"===e.provider){if(e.customPost){var r=e.customPost.value.match(t);return r?r[2]:""}return""}return n?"@".concat(n[1],".").concat(n[2]):o?o[2]:void 0}(e.value);if(!e.value.field)return e.value.source?"'[".concat(t(e.value.source,e)," ").concat(n?'item="'.concat(n,'"'):"","]'"):"''";if(e.value.is_repetitive){var o=t(e.value.field,e),r=n?'item="'.concat(n,'"'):"";return'ARRAY([wpv-for-each field="'.concat(o,'" ').concat(r," separator=\", \"]'[types field='").concat(e.value.field,"' ").concat(r.replace(/"/g,"'")," output='raw'][/types]'[/wpv-for-each])")}return"post-taxonomies"===e.value.source?"#(".concat(e.value.field,")").concat(n?".item(".concat(n,")"):""):"$(".concat(t(e.value.field||e.value.source,e),")").concat(n?".item(".concat(n,")"):"");case"current_role":return"'[wpv-current-user info=\"role\"]'";case"custom_user":return"'[wpv-user id=\"".concat(e.value.value,'" field="ID"]\'');case"current_user":return"'[wpv-current-user info=\"id\"]'";case"custom_role":return"'".concat(e.value.value?e.value.value.replace("'","\\'"):"","'");case"value":return"'".concat(e.value.replace("'","\\'"),"'");case"views_shortcode":return"'[".concat(e.value.value," ").concat(e.extra.value?e.extra.value:"","]'");case"function":return"".concat(e.value.value,"(").concat(e.extra,")");case"custom_shortcode":return"'[".concat(e.value.value," ").concat(e.extra,"]'");case"date":return e.value?"".concat(e.value.value.toUpperCase(),"(").concat(e.extra,")"):"";case"post-field":case"post-field-value":return e.value&&e.value.value?"'".concat(e.value.value,"'"):"''";default:return"''"}},_e=function(e){if(!e||!e.operator)return"";if(e.conditions)return be(e);if("empty"===e.operator.value)return e.operator.value+"( "+he(e.firstArgument)+")";if(["contains","not_contains"].includes(e.operator.value)){var t=A(e.firstArgument)||T(e.firstArgument)?"CONTAINS( "+he(e.firstArgument)+", "+he(e.secondArgument)+" )":"CONTAINS( "+he(e.secondArgument)+", "+he(e.firstArgument)+" )";return"not_contains"===e.operator.value?"NOT(".concat(t,")"):t}return"( "+he(e.firstArgument)+" ".concat(e.operator.value," ")+he(e.secondArgument)+" )"},be=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.constructor===String)return t?'[wpv-conditional if="'.concat(e,'" ').concat(n?'debug="true"':"","][/wpv-conditional]"):e;var o=e.conditions.map((function(e){return _e(e)})).join(" ".concat(e.operator," ")),r=e.negative?"NOT":"",a=" ".concat(r," ( ").concat(o," ) ");return t?'[wpv-conditional if="'.concat(a,'" ').concat(n?'debug="true"':"","][/wpv-conditional]"):a};function ge(e,t,n,o,r,a,c){try{var s=e[a](c),i=s.value}catch(e){return void n(e)}s.done?t(i):Promise.resolve(i).then(o,r)}function we(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function c(e){ge(a,o,r,c,s,"next",e)}function s(e){ge(a,o,r,c,s,"throw",e)}c(void 0)}))}}var ye=function(){var e=window,t=e.toolsetDynamicSourcesScriptData,n=e.toolsetBlocksStrings,o=P.map((function(e){return e.value})),r=/(empty|not_contains|contains|not)\s*\(/i,a=new RegExp(r,"gi"),c=/\'\[(wpv-archive-title|wpv-found-count|wpv-items-count|wpv-loop-index|wpv-search-term)([^\]]*)\]\'/,s=new RegExp(c,"g"),i=/\'(\[wpv-bloginfo[^\]]*(show="[^\]]*")[^\]]*\])\'/,u=new RegExp(i,"g"),l=/\'(\[wpv-post-taxonomy[^\]]*type="([^\"]*)"[^\]]*\])\'/,p=new RegExp(l,"g"),f=/\'\[wpv-([^\]|\s]+)[^\]]*\]\'/,d=new RegExp(f,"g"),v=/\$\(([^\)]+)\)(\.item\(([^\)]+)\))?/,m=new RegExp(v,"g"),h=/\'\[types[^\]]*field="([^"]+)"[^\]]*\](?:\[\/types\])?\'/,_=new RegExp(h,"g"),b=/#\(([^\)]+)\)(\.item\(([^\)]+)\))?/,g=new RegExp(b,"g"),w=/'\[wpv-user((?=[^\]]*id="(\d+)")|(?=[^\]]*field="ID"))[^\]]*\]'/,y=new RegExp(w,"g"),j="(?:OR|AND|empty|=|>=|>|<=|<|!=|eq|ne|gt|gte|lt|lte)",O=new RegExp("(?:\\s+".concat(j,"\\s+|\\(|^)\\s*('(?:[^'\\\\]|\\\\.)*')|('(?:[^'\\\\]|\\\\.)*')\\s*(?:\\s+").concat(j,"\\s+|\\)|$)"),"i"),x=new RegExp(O,"g"),R=new RegExp("(?:\\s+".concat(j,"\\s+|\\(|^)\\s*([\\w\\d_]+)|([\\w\\d_]+)\\s*(?:\\s+").concat(j,"\\s+|\\)|$)"),"i"),E=new RegExp(R,"ig"),S=new RegExp("(".concat(o.join("|"),")\\(([^)]*)\\)"),"i"),C=new RegExp(S,"gi"),k=new RegExp("(".concat(n.extra.viewsAllowedFunctions.join("|"),")\\(([^)]*)\\)")),A=new RegExp(k,"g"),T=new RegExp("'\\[(".concat(n.extra.viewsAllowedShortcodes.join("|"),")([^\\]]*)\\]'")),N=/(~~[^~~]*~~)\s*(=|>=|>|<=|<|!=|eq|ne|gt|gte|lt|lte)\s*(~~[^~~]*~~)/;return{dsData:t,simpleOperatorsRegExp:r,operatorsRegExp:a,repeatingFieldRegExp:/ARRAY\s*\(\s*\[wpv-for-each.*field="wpcf-([^"]+)"[^\]]*\]'\s*\[types[^\]]+\]\[\/types\]'\s*\[\/wpv-for-each\]\s*\)/gi,currentRoleRegExp:/\'\[wpv-current-user info="role"\]\'/g,currentUserRegExp:/\'\[wpv-current-user info="id"\]\'/g,currentUserDataRegExp:/\'\[wpv-current-user[^\]]*\]\'/g,simpleViewsShortcodeRegExp:c,viewsShortcodeRegExp:s,simpleBlogInfoRegExp:i,blogInfoRegExp:u,simpleTypesTaxonomyRegExp:l,typesTaxonomyRegExp:p,simplePostDataRegExp:f,postDataRegExp:d,simpleFieldRegExp:v,fieldRegExp:m,simpleTypesFieldRegExp:h,typesFieldRegExp:_,simpleTaxonomyRegExp:b,taxonomyRegExp:g,simpleCustomUserRegExp:w,customUserRegExp:y,operators:j,simpleQuotedValueRegExp:O,quotedValueRegExp:x,simpleUnquotedValueRegExp:R,unquotedValueRegExp:E,simpleDateFunctionRegExp:S,dateFunctionRegExp:C,simpleCustomFunctionRegExp:k,customFunctionRegExp:A,simpleCustomShortcodeRegExp:T,customShortcodeRegExp:new RegExp(T,"g"),containsRegExp:/%%CONTAINS%%\(\s*(~~[^~~]*~~)\s*,\s*(~~[^~~]*~~)\s*\)/gi,notContainsRegExp:/%%NOT_CONTAINS%%\(\s*(~~[^~~]*~~)\s*,\s*(~~[^~~]*~~)\s*\)/gi,emptyRegExp:/%%empty%%\(\s*(~~[^~~]*~~)\s*\)/gi,notRegExp:/%%not%%/gi,simpleLogicalConditionRegExp:N,logicalConditionRegExp:new RegExp(N,"gi"),itemRegExp:/item="([^"]+)"|\.item\(([^\)]+)\)/,relationshipProviderRegExp:/^@([a-z_-]+)\.([a-z_-]+)$/i}},je=function(){var e=we(regeneratorRuntime.mark((function e(t,n,o){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.replace(n,(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var c=o.apply(void 0,[e].concat(n));r.push(c)})),e.next=4,Promise.all(r);case 4:return a=e.sent,e.abrupt("return",t.replace(n,(function(){return a.shift()})));case 6:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),Oe=function(e){return JSON.stringify(S.find((function(t){return t.value===e})))},xe=function(e){return JSON.stringify(L.default.find((function(t){return t.value===e}))||L.taxonomies.find((function(t){return t.value===e}))||L.equivalent.find((function(t){return t.label===e})))},Re=function(){var e=we(regeneratorRuntime.mark((function e(t){var n,o,r,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.match(ye().itemRegExp))){e.next=18;break}if(!(o=n[1]||n[2]).match(ye().relationshipProviderRegExp)){e.next=5;break}return e.abrupt("return",o.replace(ye().relationshipProviderRegExp,'"toolset_relationship|$1|$2"'));case 5:if(!Number(o)){e.next=18;break}return e.next=8,p()({path:"/toolset-dynamic-sources/v1/search-post/?id=".concat(o)});case 8:if(r=e.sent,!(a=ye().dsData.postProviders.find((function(e){return e.value.match(new RegExp("custom_post_type\\|[^|]+\\|".concat(o)))})))){e.next=12;break}return e.abrupt("return",'"__custom_post","customPost":{"label":"'.concat(r[0].title,'","value":"').concat(a.value,'"}'));case 12:if(!r.length){e.next=17;break}return c="custom_post_type|".concat(r[0].post_type,"|").concat(r[0].id),e.next=16,Object(f.loadSourceFromCustomPost)({label:r[0].title,value:c});case 16:return e.abrupt("return",'"__custom_post","customPost":{"label":"'.concat(r[0].title,'","value":"').concat(c,'"}'));case 17:case 18:return e.abrupt("return",'"__current_post"');case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(e){return e&&"__custom_post"===e.value&&e.customPost?e.customPost.value:e},Se=function(e){return e.replace(/^.*"value":"([^"]+)".*$/,"$1").replace(/^"(.*)"$/,"$1")},Ce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toolset",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=null;if(o){if(ye().dsData.hasOwnProperty("dynamicSourcesForViews"))for(var a in ye().dsData.dynamicSourcesForViews)if(ye().dsData.dynamicSourcesForViews[a].hasOwnProperty(t)){r=ye().dsData.dynamicSourcesForViews[a][t];break}}else r=ye().dsData.dynamicSources[t];if(!r)return"";var c=r.find((function(e){return e.id===n}));if(!c)return"";var s=c.options.find((function(t){return t.fields.find((function(t){return t.value===e}))||t.value===e}));return s?s.value:""},Pe=function(){var e=we(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(t,ye().repeatingFieldRegExp,function(){var e=we(regeneratorRuntime.mark((function e(t){var n,o,r,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(t);case 2:return n=e.sent,o=t.match(/field="wpcf-([^"]+)"/),r=Ee(n),a=Se(r),c=Ce(o[1],a),e.abrupt("return",'~~"##ARGUMENT##": { "source": '.concat(Oe("post"),', "value": {"provider": ').concat(n,', "is_repetitive": true, "source": "').concat(c,'", "field": "').concat(o[1],'" } } ~~'));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(e){return e.replace(ye().operatorsRegExp,(function(e){var t=e.match(ye().simpleOperatorsRegExp);return e.replace(t[1],"%%".concat(t[1],"%%"))}))},Ae=function(e){return e.replace(ye().currentRoleRegExp,'~~"##ARGUMENT##": { "source": '.concat(Oe("current_role"),', "value": "", "extra": "" } ~~'))},Te=function(e){return e.replace(ye().currentUserRegExp,'~~"##ARGUMENT##": { "source": '.concat(Oe("current_user"),', "value": "", "extra": "" } ~~'))},Ne=function(e){return e.replace(ye().currentUserDataRegExp,'~~"##ARGUMENT##": { "source": '.concat(Oe("current_user"),', "value": "", "extra": "" } ~~'))},De=function(e){return e.replace(ye().viewsShortcodeRegExp,(function(e){var t=e.match(ye().simpleViewsShortcodeRegExp),n=E.find((function(e){return e.value===t[1]})),o=t[2]?JSON.stringify({value:t[2]}):"";return'~~"##ARGUMENT##": { "source": '.concat(Oe("views_shortcode"),', "value": ').concat(JSON.stringify(n),', "extra": ').concat(o," } ~~")}))},Ie=function(e){return e.replace(ye().blogInfoRegExp,(function(e){var t=e.match(ye().simpleBlogInfoRegExp),n=E.find((function(e){return"wpv-bloginfo"===e.value})),o=n.extra.find((function(e){return e.value===t[2]}));return'~~"##ARGUMENT##": { "source": '.concat(Oe("views_shortcode"),', "value": ').concat(JSON.stringify({value:n.value,label:n.label}),', "extra": ').concat(JSON.stringify(o)," } ~~")}))},Me=function(){var e=we(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(t,ye().typesTaxonomyRegExp,function(){var e=we(regeneratorRuntime.mark((function e(t){var n,o,r,a,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(t);case 2:return n=e.sent,o=t.match(ye().simpleTypesTaxonomyRegExp),r=o[2],a=Ee(n),c=Se(a),"post",s=Ce(r,c,"post"),e.abrupt("return",t.replace(ye().typesTaxonomyRegExp,'~~"##ARGUMENT##": {"source": '.concat(Oe("post"),', "value": { "provider": ').concat(n,', "source": "').concat(s,'", "field": "').concat(r,'", "is_repetitive": false } } ~~')));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=we(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(t,ye().postDataRegExp,function(){var e=we(regeneratorRuntime.mark((function e(t){var n,o,r,a,c,s,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(t);case 2:n=e.sent,o=t.match(ye().simplePostDataRegExp),r=function(e){return t.replace(ye().postDataRegExp,'~~"##ARGUMENT##": {"source": '.concat(Oe("post"),', "value": { "provider": ').concat(n,', "source": "').concat(e,'", "is_repetitive": false } } ~~'))},e.t0=o[1],e.next="bloginfo"===e.t0?8:"post-author"===e.t0?10:"post-featured-image"===e.t0?16:"post-slug"===e.t0?17:"post-link"===e.t0?18:"post-comments-number"===e.t0?19:"post-field"===e.t0?20:"post-taxonomy"===e.t0?24:"post-format"===e.t0||"post-class"===e.t0||"post-edit-link"===e.t0||"post-menu-order"===e.t0||"post-previous-link"===e.t0||"post-next-link"===e.t0||"user"===e.t0?28:29;break;case 8:return a=E.find((function(e){return"wpv-bloginfo"===e.value})),e.abrupt("return",'~~"##ARGUMENT##": { "source": '.concat(Oe("views_shortcode"),', "value": ').concat(JSON.stringify({value:a.value,label:a.label}),', "extra": ').concat(JSON.stringify(a.extra[1])," } ~~"));case 10:if(c=t.match(/meta="([^"]+)"/),s=function(e){return e||"display_name"!==e[1]?"ID"===e[1]&&"author-id":"author-name"}(c)){e.next=15;break}return e.abrupt("return",t);case 15:return e.abrupt("return",t.replace(ye().postDataRegExp,'~~"##ARGUMENT##": {"source": '.concat(Oe("post"),', "value": { "provider": ').concat(n,', "source": "').concat(s,'", "is_repetitive": false } } ~~')));case 16:return e.abrupt("return",r("media-featured-image-data"));case 17:return e.abrupt("return",r("post-name"));case 18:return e.abrupt("return",r("post-title-with-link"));case 19:return e.abrupt("return",r("comments-number"));case 20:if(i=t.match(/name="([^"]+)"/)){e.next=23;break}return e.abrupt("return",t);case 23:return e.abrupt("return",r(i[1]));case 24:if(u=t.match(/type="([^"]+)"/)){e.next=27;break}return e.abrupt("return",t);case 27:return e.abrupt("return",r('post-taxonomies", field="'.concat(u[1])));case 28:return e.abrupt("return",t);case 29:return e.abrupt("return",r(o[1]));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(){var e=we(regeneratorRuntime.mark((function e(t,n){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(t,ye().fieldRegExp,function(){var e=we(regeneratorRuntime.mark((function e(t){var o,r,a,c,s,i,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(t);case 2:return o=e.sent,r=t.match(ye().simpleFieldRegExp),a=r[1].replace(/(wpcf|wpv)-/,""),c=Ee(o),s=Se(c),i=r[1].match(/^wpcf-.*$/)?"toolset":"metabox",u=Ce(a,s,i,n),l=u?'"source": "'.concat(u,'", "field": "').concat(a,'"'):'"source": "'.concat(a,'", "field": ""'),e.abrupt("return",t.replace(ye().fieldRegExp,'~~"##ARGUMENT##": {"source": '.concat(Oe("post"),', "value": { "provider": ').concat(o,", ").concat(l,', "is_repetitive": false } } ~~')));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ve=function(){var e=we(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(t,ye().typesFieldRegExp,function(){var e=we(regeneratorRuntime.mark((function e(t){var n,o,r,a,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(t);case 2:return n=e.sent,o=t.match(ye().simpleTypesFieldRegExp),r=o[1],a=Ee(n),c=Se(a),"toolset",s=Ce(r,c,"toolset"),e.abrupt("return",t.replace(ye().typesFieldRegExp,'~~"##ARGUMENT##": {"source": '.concat(Oe("post"),', "value": { "provider": ').concat(n,', "source": "').concat(s,'", "field": "').concat(r,'", "is_repetitive": false } } ~~')));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=we(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(t,ye().taxonomyRegExp,function(){var e=we(regeneratorRuntime.mark((function e(t){var n,o,r,a,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(t);case 2:return n=e.sent,o=t.match(ye().simpleTaxonomyRegExp),r=o[1],a=Ee(n),c=Se(a),"post",s=Ce(r,c,"post"),e.abrupt("return",t.replace(ye().taxonomyRegExp,'~~"##ARGUMENT##": {"source": '.concat(Oe("post"),', "value": { "provider": ').concat(n,', "source": "').concat(s,'", "field": "').concat(r,'", "is_repetitive": false } } ~~')));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=we(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(t,ye().customUserRegExp,function(){var e=we(regeneratorRuntime.mark((function e(t){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.match(ye().simpleCustomUserRegExp),e.next=3,wp.apiFetch({path:"/wp/v2/users/".concat(n[2])});case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return","");case 6:return e.abrupt("return",t.replace(ye().customUserRegExp,'~~"##ARGUMENT##": {"source": '.concat(Oe("custom_user"),', "value": { "label": "').concat(o.name,'", "value": ').concat(o.id,' }, "extra": "" } ~~')));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(e){return e.replace(ye().dateFunctionRegExp,(function(e){var t=e.match(ye().simpleDateFunctionRegExp),n=P.find((function(e){return e.value===t[1].toLowerCase()}));return e.replace(ye().dateFunctionRegExp,'~~"##ARGUMENT##": {"source": '.concat(Oe("date"),', "value": { "value": "').concat(n.value,'", "label": "').concat(n.label,'" }, "extra": "').concat(t[2].replace(/"|'/g,""),'" } ~~'))}))},Le=function(e){return e.replace(ye().customFunctionRegExp,(function(e){var t=e.match(ye().simpleCustomFunctionRegExp);return e.replace(ye().customFunctionRegExp,'~~"##ARGUMENT##": {"source": '.concat(Oe("function"),', "value": { "value": "').concat(t[1],'", "label": "').concat(t[1],'" }, "extra": "').concat(t[2].replace(/"/g,'\\"'),'" } ~~'))}))},ze=function(e){return e.replace(ye().customShortcodeRegExp,(function(e){var t=e.match(ye().simpleCustomShortcodeRegExp);return e.replace(ye().customShortcodeRegExp,'~~"##ARGUMENT##": {"source": '.concat(Oe("custom_shortcode"),', "value": { "value": "').concat(t[1],'", "label": "').concat(t[1],'" }, "extra": "').concat(t[2].replace(/"/g,'\\"'),'" } ~~'))}))},qe=function(e){return e.replace(ye().quotedValueRegExp,(function(e){var t=e.match(ye().simpleQuotedValueRegExp),n=t[1]||t[2],o=n.replace(/\\\'/g,"'").replace(/"/g,'\\"').replace(/^\'(.*)\'$/,"$1");return e.replace(n,'~~"##ARGUMENT##": { "source": '.concat(Oe("value"),', "value": "').concat(o,'", "extra": "" } ~~'))}))},Ye=function(e){return e.replace(ye().unquotedValueRegExp,(function(e){var t=e.match(ye().simpleUnquotedValueRegExp),n=t[1]||t[3];return e.replace(n,'~~"##ARGUMENT##": { "source": '.concat(Oe("value"),', "value": "').concat(n,'", "extra": "" } ~~'))}))},He=function(e){return e.replace("##ARGUMENT##","firstArgument").replace("##ARGUMENT##","secondArgument").replace(/~~/g,"")},Je=function(e){return e.replace(ye().containsRegExp,(function(e){var t=e.replace(ye().containsRegExp,'^^{$1, "operator": '.concat(xe("contains"),", $2}^^"));return He(t)}))},We=function(e){return e.replace(ye().notContainsRegExp,(function(e){var t=e.replace(ye().notContainsRegExp,'^^{$1, "operator": '.concat(xe("not_contains"),", $2}^^"));return He(t)}))},Qe=function(e){return e.replace(ye().emptyRegExp,(function(e){var t=e.replace(ye().emptyRegExp,'^^{$1, "operator": '.concat(xe("empty"),', "secondArgument": ').concat(JSON.stringify(z.secondArgument)," }^^"));return He(t)}))},Ke=function(e){return e.replace(ye().notRegExp,"NOT")},Xe=function(e){return e.replace(ye().logicalConditionRegExp,(function(e){var t=e.match(ye().simpleLogicalConditionRegExp),n=xe(t[2]),o=e.replace(ye().logicalConditionRegExp,'^^{$1, "operator": '.concat(n,", $3}^^"));return He(o)}))},Ze=[],et=function(e){var t=!1,n=e.replace(/\(\s*\^\^/g,"(^^").replace(/\^\^\s*\)/g,"^^)");do{t=!1,n=n.replace(/\^\^[^\^\^]*\^\^/g,(function(e){return Ze.push(e.replace(/\^\^/g,"")),t=!0,"CONDITION"}))}while(t);for(var o=/(\(\s*){2}CONDITION(\s*\)){2}/g;n.match(o);)n=n.replace(o,"(CONDITION)");return n},tt=function(e){e.match(/.*\(.*\).*/)||(e=" ( ".concat(e," ) "));var t=0;return function n(){var o=[],r=t;function a(){t-1>r&&o.push(e.slice(r,t-1))}for(;t<e.length;)switch(e[t++]){case" ":a(),r=t;continue;case"(":o.push(n()),r=t;continue;case")":return a(),o}return a(),o}()},nt=function e(t,n){if(!n&&t.constructor===Array&&1===t.length)return e(t[0]);if(t.constructor===String)return t;var o="",r=!1,a=t.filter((function(e,n){return e.constructor===String&&e.match(/^and|or$/i)?(o=e.toUpperCase(),!1):"!"===e?(r=!0,!1):!("NOT"===e&&t.length>=n+1&&t[n+1].constructor===Array)||(t[n+1].unshift("!"),!1)})).map((function(t){return e(t,!1)}));return{operator:o,conditions:a,negative:r}},ot=function(e){var t=JSON.stringify(e);t=t.replace(/"CONDITION"/g,"CONDITION").replace(/^\[(.*)\]$/,"$1");var n=!1;do{n=!1,t=t.replace(/CONDITION/,(function(){return n=!0,Ze.shift()}))}while(n);try{return JSON.parse(t)}catch(e){throw"Error parsing conditions"}},rt=function e(t){return t.conditions&&(t.operator||(t.operator="AND"),t.conditions.forEach((function(t){return e(t)}))),t},at=function e(t){if(t.conditions){if(1===t.conditions.length&&t.conditions[0].conditions)return t.conditions[0];t.conditions.map((function(t){return t.conditions?e(t):t}))}return t},ct=function(){var e=we(regeneratorRuntime.mark((function e(t){var n,o,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],e.prev=1,o=ke(t),e.next=5,Pe(o);case 5:return o=e.sent,e.next=8,Be(o);case 8:return o=e.sent,o=Ae(o),o=Te(o),o=Ne(o),o=De(o),o=Ie(o),e.next=16,Me(o);case 16:return o=e.sent,e.next=19,Fe(o);case 19:return o=e.sent,e.next=22,Ue(o,n);case 22:return o=e.sent,e.next=25,Ve(o);case 25:return o=e.sent,e.next=28,Ge(o);case 28:return o=e.sent,o=$e(o),o=Le(o),o=ze(o),o=qe(o),o=Ye(o),o=Je(o),o=We(o),o=Qe(o),o=Ke(o),o=Xe(o),o=et(o),o=tt(o),o=nt(o,!0),o=ot(o),o=rt(o),o=at(o),e.abrupt("return",o);case 48:return e.prev=48,e.t0=e.catch(1),e.abrupt("return",!1);case 51:case"end":return e.stop()}}),e,null,[[1,48]])})));return function(t){return e.apply(this,arguments)}}(),st=function(){window.CodeMirror.modes["wpv-conditionals"]||window.CodeMirror.defineMode("wpv-conditionals",(function(){var e="";return{startState:function(){return{inString:!1,matchedQuote:null,inShortcode:!1,isShortcodeSlug:!1}},token:function(t,n){var o,r=t.next(),a=null;if(["'",'"'].includes(r)){var c=(o=r,n.matchedQuote===r?(n.inString=!1,n.matchedQuote=null,"tb-quotes"):n.matchedQuote?null:("["===t.peek()||"]"===e?n.inShortcode="]"!==e:(n.inString=!0,n.matchedQuote=o),"tb-quotes"));c&&(a=c)}else n.inString?n.inString&&(a="tb-string"):t.match(/(?:\$|#)\([^\)]*\)/)?a="tb-field":t.match(/item\([^\)]*\)/)?a="tb-item":["(",")"].includes(r)?(")"===r&&(n.isFieldOrTaxonomy=!1),a="tb-parentheses"):a||"["!==r?n.inShortcode&&" "===r?(n.isShortcodeSlug=!1,a=null):n.inShortcode&&t.match(/[\w_-]+/)?a=n.isShortcodeSlug?"tb-shortcode-slug":"tb-shortcode-attribute":"]"===r?(n.inShortcode=!1,n.isShortcodeSlug=!1,a="tb-bracket"):t.match(new RegExp("".concat(["CONTAINS","NOTCONTAINS","EMPTY","ARRAY","AND","OR"].join("|")),"i"))&&(a="tb-keyword"):(n.inShortcode=!0,n.isShortcodeSlug=!0,a="tb-bracket");return e=r,a}}}))};n("./public_src/components/conditionals/utils/views-shortcode.js");function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=vt(e);if(t){var r=vt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return dt(this,n)}}function dt(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(i,e);var t,n,o,r=ft(i);function i(){return ut(this,i),r.apply(this,arguments)}return t=i,(n=[{key:"getCodeMirrorId",value:function(){var e=this.props.codeMirrorId;return"codemirror-".concat(e)}},{key:"componentDidMount",value:function(){var e=this,t=document.getElementById(this.getCodeMirrorId());st(),this.codemirror=window.CodeMirror.fromTextArea(t,{lineWrapping:!0,scrollbarStyle:"null",viewportMargin:1/0,mode:"wpv-conditionals",matchBrackets:!0,highlightMatches:!0}),this.codemirror.on("change",(function(){e.props.onConditionsUpdate(e.codemirror.getValue())}))}},{key:"componentWillUnmount",value:function(){this.props.onClose(this.codemirror.getValue()),this.codemirror.toTextArea()}},{key:"viewsConditionalButton",value:function(){var e=this;return window.toolsetBlocksStrings.extra.isViewsEnabled?"undefined"==typeof WPV_Toolset||"undefined"==typeof WPViews||void 0===WPViews.shortcodes_gui||"function"!=typeof WPViews.shortcodes_gui.wpv_insert_popup_conditional||"undefined"==typeof icl_editor_localization_texts||void 0===icl_editor_localization_texts.wpv_insert_conditional_shortcode||void 0===icl_editor_localization_texts.wpv_editor_callback_nonce?null:React.createElement("div",{className:"tb-condition__advanced-editor-buttons"},React.createElement(s.Tooltip,{text:Object(a.__)("Add Types or Views shortcode","wpv-views")},React.createElement(s.Button,{className:"components-button tb-icon-button tb-fields-and-text-toolbar-views-add-conditional",onClick:function(){e.codemirror.focus(),window.wpcfActiveEditor=e.getCodeMirrorId(),Toolset.hooks.doAction("toolset-action-set-shortcode-gui-action","insert"),WPViews.shortcodes_gui.open_fields_and_views_dialog()}},React.createElement("i",{className:"icon-views-logo fa fa-wpv-paragraph ont-icon-24"})))):null}},{key:"render",value:function(){var e=this.props,t=e.logic,n=e.parsedConditions,o=e.forceUseParsedConditions;return React.createElement(c.Fragment,null,this.viewsConditionalButton(),React.createElement("textarea",{id:this.getCodeMirrorId(),defaultValue:o?n:_e(t)}),React.createElement("p",{dangerouslySetInnerHTML:{__html:Object(a.sprintf)(Object(a.__)('You can set up the condition manually using the <a href="%s" target="_blank" class="tb-external-link">Views shortcode</a>. <br />Please, write only the expression that will be included in the <strong>if</strong> attribute of the <strong>wpv-conditional</strong> shortcode: <em>[wpv-conditional if="(your expression)"]</em>.',"wpv-views"),"https://toolset.com/course-lesson/using-toolset-conditional-block/?utm_source=plugin&utm_medium=gui&utm_campaign=blocks")}}))}}])&&lt(t.prototype,n),o&&lt(t,o),i}(c.Component);function ht(e){var t=function(e){if(!e||!e.source||"post"===e.source)return!0;switch(e.source.value){case"post":if(!e.value)return!0;if(!e.value.source&&!e.value.field&&!e.value.customPost)return!0;break;case"views_shortcode":if(!e.value)return!0;var t=E.find((function(t){return t.value===e.value.value}));if(!t)return!0;if(t.extra){if(!e.extra)return!0;if(!t.extra.find((function(t){return t.value===e.extra.value})))return!0}break;case"custom_shortcode":case"function":case"custom_user":if(!e.value)return!0;break;case"custom_role":if(!e.value)return!0;if(!window.toolsetBlocksStrings.extra.listRoles.find((function(t){return t.value===e.value.value})))return!0;break;case"date":if(!e.value)return!0}return!1};return e.conditions?!!e.conditions.find((function(e){return!0===ht(e)})):t(e.firstArgument)||t(e.secondArgument)}function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t,n,o,r,a,c){try{var s=e[a](c),i=s.value}catch(e){return void n(e)}s.done?t(i):Promise.resolve(i).then(o,r)}function gt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Ot(e);if(t){var r=Ot(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return jt(this,n)}}function jt(e,t){return!t||"object"!==_t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(c,e);var t,n,o,r=yt(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=r.call(this,e)).state={isLoading:!1,conditions:e.conditions?e.conditions:d(pe(e.configuration).logic),parsedConditions:e.parsedConditions?e.parsedConditions:"",modalOpened:!0,isAdvanced:!!e.advancedEditor&&e.advancedEditor,thereIsAParsingError:!1,incompleteWarning:!1,confirmationEditorModeOpened:!1},t}return t=c,(n=[{key:"isValidConditions",value:function(e){return!JSON.stringify(e).match("##ARGUMENT##")}},{key:"confirmEditorMode",value:function(){var e=this.state.isAdvanced,t=this.props.toggleAdvancedEditor;e?this.setState({confirmationEditorModeOpened:!0}):this.setState({isAdvanced:!e},(function(){t&&t()}))}},{key:"modalEditorMode",value:function(){var e=this,t=this.state.confirmationEditorModeOpened,n=this.props.toggleAdvancedEditor,o=Object(a.__)("Switch to Visual Editor?","wpv-views"),r=Object(a.__)("Some conditions might be lost if you switch back to Visual Editor","wpv-views");return t&&React.createElement(s.Modal,{title:o,isDismissible:!1},React.createElement("p",null,r),React.createElement("div",{className:"tb-condition__modal__buttons"},React.createElement(s.Button,{variant:"secondary",onClick:function(){return e.setState({confirmationEditorModeOpened:!1})}},Object(a.__)("Cancel","wpv-views")),React.createElement(s.Button,{variant:"primary",onClick:function(){e.setState({confirmationEditorModeOpened:!1,isAdvanced:!1}),n()}},Object(a.__)("Accept","wpv-views"))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.clientId,o=t.onCancel,r=t.onChange,c=t.getOnlyConditions,i=t.debug,u=t.isInsideViewEditor,l=t.configuration,p=this.state,f=p.conditions,v=p.parsedConditions,m=p.isAdvanced,h=React.createElement("div",{className:"tb-condition__modal__header"},React.createElement("span",null,Object(a.__)("Edit conditions","wpv-views")),React.createElement(s.ToggleControl,{label:Object(a.__)("Advanced Editor","wpv-views"),checked:m,onChange:function(){return e.confirmEditorMode()},className:"tb-condition__toggle"})),_=function(t){return ht(t)?(e.setState({incompleteWarning:!0}),!1):!(!t||!e.isValidConditions(t))||(e.setState({thereIsAParsingError:!0}),!1)};return React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement(s.Modal,{className:"tb-condition__modal",title:h,onRequestClose:function(){return o()},shouldCloseOnClickOutside:!1},this.state.thereIsAParsingError&&React.createElement(s.Notice,{status:"error",onRemove:function(){return e.setState({thereIsAParsingError:!1})}},Object(a.__)("There is an error in the conditions, please check them","wpv-views")),this.state.incompleteWarning&&React.createElement(s.Notice,{status:"warning",onRemove:function(){return e.setState({incompleteWarning:!1})}},Object(a.__)("Please, complete all the conditions or remove them","wpv-views")),!m&&React.createElement(de,{logic:f,configuration:l||null,loading:this.state.isLoading,udpateConditionsCallback:function(t){e.setState({conditions:d(t),parsedConditions:be(t)})},parentPath:[],componentId:"".concat(n,"-group"),parentId:n,onError:function(t){return e.setState({thereIsAnError:t})}}),m&&React.createElement(mt,{codeMirrorId:n,logic:f,parsedConditions:v,onConditionsUpdate:function(t){e.setState({parsedConditions:t})},onClose:function(){}}),this.props.children,React.createElement("div",{className:"tb-condition__modal__buttons"},React.createElement(s.Button,{variant:"secondary",onClick:function(){return o()}},Object(a.__)("Cancel","wpv-views")),React.createElement(s.Button,{variant:"primary",onClick:function(){if(m)e.setState({isLoading:!0}),new Promise(function(){var t,n=(t=regeneratorRuntime.mark((function t(n,o){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ct(v,u);case 2:r=t.sent,_(r)||o(r),r&&e.isValidConditions(r)?n(r):o(r);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function c(e){bt(a,o,r,c,s,"next",e)}function s(e){bt(a,o,r,c,s,"throw",e)}c(void 0)}))});return function(e,t){return n.apply(this,arguments)}}()).then((function(t){e.setState({conditions:void 0,parsedConditions:""}),r(d(t),be(v,!c,i))})).catch((function(){e.setState({isLoading:!1}),setTimeout((function(){return e.setState({thereIsAParsingError:!1,incompleteWarning:!1})}),15e3)}));else{var t=be(f,!c,i);_(f)&&r(f,t)}}},Object(a.__)("Accept","wpv-views"))))),this.modalEditorMode())}}])&&gt(t.prototype,n),o&&gt(t,o),c}(c.Component);xt.propTypes={clientId:me.a.string.isRequired,onCancel:me.a.func.isRequired,onChange:me.a.func.isRequired,conditions:me.a.object,configuration:me.a.object,parsedConditions:me.a.string,getOnlyConditions:me.a.bool,debug:me.a.bool},xt.defaultProps={getOnlyConditions:!0,debug:!1};var Rt=window.toolsetDynamicSourcesScriptData,Et=function(e,t){var n="";if(t){for(var o in Rt.postProvidersForViews)if(n=Rt.postProvidersForViews[o].find((function(t){return t.value===e})))return n.label}else n=Rt.postProviders.find((function(t){return t.value===e}));return n?n.label:""},St=function(e){return!!e.provider&&("__custom_post"===e.provider&&e.customPost&&e.customPost.value?e.customPost.value:e.provider)},Ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=St(e),o=t?Object.values(Rt.dynamicSourcesForViews):[Rt.dynamicSources],r=null;return o.forEach((function(t){n&&t[n]&&!r&&t[n].some((function(t){return!(!t.options&&!r)&&(t.options.some((function(t){return t.value===e.source&&(t.fields&&(t.fields.some((function(t){return t.value===e.field&&(r=Object(a.sprintf)(Object(a.__)("Field <strong>%s</strong>","wpv-views"),t.label),!0)})),r)||(r="<strong>".concat(t.label,"</strong>")),!0)})),!!r||void 0)}))})),r},Pt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=window,r=o.toolsetBlocksStrings,c=t?Object(a.__)("The result of %s","wpv-views"):Object(a.__)("the result of %s","wpv-views");if(!e||!e.source)return"";switch(e.source.value){case"post":var s=Et(St(e.value),n),i=Ct(e.value,n);return!(!s||!i)&&"".concat(i," from <strong>").concat(s,"</strong>");case"value":return!!e.value&&"<strong>".concat(e.value,"</strong>");case"views_shortcode":if(!e.value)return!1;var u=E.find((function(t){return t.value===e.value.value}));if(!u)return!1;if(u.extra){if(!e.extra)return!1;var l=u.extra.find((function(t){return t.value===e.extra.value}));return!!l&&"<strong>".concat(l.label,"</strong>")}return"<strong>".concat(u.label,"</strong>");case"custom_shortcode":if(!e.value)return!1;var p=e.extra?" ".concat(e.extra):"";return Object(a.sprintf)(c,"<strong>[".concat(e.value.value).concat(p,"]</strong>"));case"function":return!!e.value&&Object(a.sprintf)(c,"<strong>".concat(e.value.value,"(").concat(e.extra,")</strong>"));case"current_user":return"<strong>".concat(Object(a.__)("Current user","wpv-views"),"</strong>");case"current_role":return"<strong>".concat(Object(a.__)("Current user role","wpv-views"),"</strong>");case"custom_user":if(!e.value)return!1;var f=t?Object(a.__)("User %s","wpv-views"):Object(a.__)("user %s","wpv-views");return Object(a.sprintf)(f,"<strong>".concat(e.value.label,"</strong>"));case"custom_role":if(!e.value)return!1;var d=r.extra.listRoles.find((function(t){return t.value===e.value.value})),v=t?Object(a.__)("Role %s","wpv-views"):Object(a.__)("role %s","wpv-views");return!!d&&Object(a.sprintf)(v,"<strong>".concat(d.label,"</strong>"));default:return!1}},kt=function(e){switch(e.value){case"=":case"eq":return Object(a.__)("is equal to","wpv-views");case">":case"gt":return Object(a.__)("is greater than","wpv-views");case"<":case"lt":return Object(a.__)("is less than","wpv-views");case">=":case"gte":return Object(a.__)("is greater than or equal to","wpv-views");case"<=":case"lte":return Object(a.__)("is less than or equal to","wpv-views");case"!=":case"ne":return Object(a.__)("is not equal to","wpv-views");case"empty":return Object(a.__)("is empty","wpv-views");case"contains":return Object(a.__)("contains","wpv-views");case"not_contains":return Object(a.__)("doesn't contain","wpv-views");default:return!1}},At=function(e){switch(e.value){case">":case"gt":return{value:"lt"};case"<":case"lt":return{value:"gt"};case">=":case"gte":return{value:"lte"};case"<=":case"lte":return{value:"gte"};default:return e}},Tt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e){switch(e.value.value){case"now":return"<strong>".concat(Object(a.__)("now","wpv-views"),"</strong>");case"today":return"<strong>".concat(Object(a.__)("today","wpv-views"),"</strong>");case"future_day":return 1===parseInt(e.extra)?Object(a.__)("<strong>one day</strong> from <strong>now</strong>","wpv-views"):Object(a.sprintf)(Object(a.__)("<strong>%s days</strong> from <strong>now</strong>","wpv-views"),e.extra);case"past_day":return 1===parseInt(e.extra)?"<strong>".concat(Object(a.sprintf)(Object(a.__)("one day ago","wpv-views"),e.extra),"</strong>"):"<strong>".concat(Object(a.sprintf)(Object(a.__)("%s days ago","wpv-views"),e.extra),"</strong>");case"this_month":return Object(a.__)("the <strong>first day</strong> of <strong>this month</strong>","wpv-views");case"future_month":return 1===parseInt(e.extra)?Object(a.sprintf)(Object(a.__)("the <strong>first day</strong> of <strong>next month</strong>","wpv-views"),e.extra):Object(a.sprintf)(Object(a.__)("the <strong>first day<strong> of <strong>%s months</strong> from <strong>now</strong>","wpv-views"),e.extra);case"past_month":return 1===parseInt(e.extra)?Object(a.sprintf)(Object(a.__)("the <strong>first day</strong> of <strong>past month</strong>","wpv-views"),e.extra):Object(a.sprintf)(Object(a.__)("the <strong>first day</strong> of <strong>%s months ago</strong>","wpv-views"),e.extra);case"this_year":return Object(a.__)("<strong>January 1st</strong> of <strong>this year</strong>","wpv-views");case"future_year":return 1===parseInt(e.extra)?Object(a.sprintf)(Object(a.__)("<strong>January 1st</strong> of <strong>next year</strong>","wpv-views"),e.extra):Object(a.sprintf)(Object(a.__)("<strong>January 1st</strong> in <strong>%s years</strong> from <strong>now</strong>","wpv-views"),e.extra);case"past_year":return 1===parseInt(e.extra)?Object(a.sprintf)(Object(a.__)("<strong>January 1st</strong> of <strong>past year</strong>","wpv-views"),e.extra):Object(a.sprintf)(Object(a.__)("<strong>January 1st</strong> of <strong>%s years ago</strong>","wpv-views"),e.extra);case"seconds_from_now":return 1===parseInt(e.extra)?Object(a.sprintf)(Object(a.__)("<strong>one second</strong> from <strong>now</strong>","wpv-views"),e.extra):Object(a.sprintf)(Object(a.__)("<strong>%s seconds</strong> from <strong>now</strong>","wpv-views"),e.extra);case"months_from_now":return 1===parseInt(e.extra)?Object(a.sprintf)(Object(a.__)("<strong>one month</strong> from <strong>now</strong>","wpv-views"),e.extra):Object(a.sprintf)(Object(a.__)("<strong>%s months</strong> from <strong>now</strong>","wpv-views"),e.extra);case"years_from_now":return 1===parseInt(e.extra)?Object(a.sprintf)(Object(a.__)("<strong>one year</strong> from <strong>now</strong>","wpv-views"),e.extra):Object(a.sprintf)(Object(a.__)("<strong>%s years</strong> from <strong>now</strong>","wpv-views"),e.extra);case"date":return"<strong>".concat(Object(a.sprintf)(Object(a.__)("%s","wpv-views"),e.extra.replace(/(\d+),\s*(\d+),\s*(\d+)/g,(function(e,t,n,o){var r=function(e){return"0".concat(e).slice(-2)};return"".concat(o,"/").concat(r(n),"/").concat(r(t))}))),"</strong>")}return!1},o="date"===e.firstArgument.source.value,r=Pt(o?e.secondArgument:e.firstArgument,!0,t),c=kt(o?At(e.operator):e.operator),s=n(o?e.firstArgument:e.secondArgument,!0);return"".concat(r," ").concat(c," ").concat(s)},Nt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if([e.firstArgument.source.value,e.secondArgument.source.value].includes("date"))return Tt(e,t);var n=Pt(e.firstArgument,!0,t),o=kt(e.operator),r="empty"===e.operator.value?"":Pt(e.secondArgument,!1,t);return"="===e.operator.value?("value"!==e.firstArgument.source.value||e.firstArgument.value||(n=Object(a.__)("Empty","wpv-views"),o=""),"value"!==e.secondArgument.source.value||e.secondArgument.value||(o="",r=Object(a.__)("is empty","wpv-views"))):"!="===e.operator.value&&("value"!==e.firstArgument.source.value||e.firstArgument.value||(n=Object(a.__)("Not empty","wpv-views"),o=""),"value"!==e.secondArgument.source.value||e.secondArgument.value||(o="",r=Object(a.__)("is not empty","wpv-views"))),!1===n||!1===o||!1===r?Object(a.__)("Incomplete condition","wpv-views"):"".concat(n," ").concat(o," ").concat(r,".")};function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Gt(e);if(t){var r=Gt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Vt(this,n)}}function Vt(e,t){return!t||"object"!==Dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gt(e){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(a,e);var t,n,o,r=Ut(a);function a(){return It(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.if,n=e.debug,o=t?'[wpv-conditional if="'.concat(t,'" ').concat(n?'debug="true"':"","]"):"",r=t?"[/wpv-conditional]":"";return React.createElement(c.Fragment,null,React.createElement(c.RawHTML,null,o),this.props.children,React.createElement(c.RawHTML,null,r))}}])&&Mt(t.prototype,n),o&&Mt(t,o),a}(c.Component);function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){Kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Qt(e);if(t){var r=Qt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Jt(this,n)}}function Jt(e,t){return!t||"object"!==$t(t)&&"function"!=typeof t?Wt(e):t}function Wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(c,e);var t,n,o,r=Ht(c);function c(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),Kt(Wt(t=r.call(this,e)),"reactSelectStyles",{menu:function(e){return zt(zt({},e),{},{position:"relative"})},input:function(e,t){return zt(zt({},e),{},{"& input:focus":{boxShadow:(t.isFocused,"none !important")}})}}),!e.udpateConditionCallback)throw new Error("You must set udpateConditionCallback for <Condition />");return t.state={error:!1},t}return t=c,(n=[{key:"getFilterNamespace",value:function(){return"argument-".concat(this.props.componentId)}},{key:"setConditionElement",value:function(e,t){var n=d(this.props.source);n[e]=t,this.props.udpateConditionCallback(n)}},{key:"render",value:function(){var e=this,t=this.props.source.value,n=this.props.configuration.parameters;return React.createElement("div",null,this.state.error&&React.createElement(s.Notice,{status:"error",isDismissible:!1},Object(a.__)("Please, enter valid data: ","wpv-views")+this.state.error),React.createElement(s.BaseControl,null,React.createElement(i.Select,{placeholder:Object(a.__)("Select...","wpv-views"),styles:this.reactSelectStyles,value:t||{},options:n.options,onChange:function(t){return e.setConditionElement("value",t)}})))}}])&&qt(t.prototype,n),o&&qt(t,o),c}(c.Component);function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach((function(t){un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function on(e,t){return(on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=sn(e);if(t){var r=sn(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return an(this,n)}}function an(e,t){return!t||"object"!==Zt(t)&&"function"!=typeof t?cn(e):t}function cn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sn(e){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ln=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(c,e);var t,n,o,r=rn(c);function c(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),un(cn(t=r.call(this,e)),"reactSelectStyles",{menu:function(e){return tn(tn({},e),{},{position:"relative"})},input:function(e,t){return tn(tn({},e),{},{"& input:focus":{boxShadow:(t.isFocused,"none !important")}})}}),!e.udpateConditionCallback)throw new Error("You must set udpateConditionCallback for <Condition />");return t.state={error:!1,loading:!1,options:[],search:"",firstArgumentValue:e.firstArgument?e.firstArgument.value.value:"",value:e.source&&e.source.value?e.source.value.value:""},t.refreshInputControl=t.refreshInputControl.bind(cn(t)),t}return t=c,(n=[{key:"getFilterNamespace",value:function(){return"argument-".concat(this.props.componentId)}},{key:"componentDidMount",value:function(){this.refreshInputControl()}},{key:"componentDidUpdate",value:function(){this.refreshInputControl()}},{key:"refreshInputControl",value:function(){var e=this.props.firstArgument,t=this.state.firstArgumentValue;if(e){var n=e.value;n.value!==t&&(this.setConditionElement("value",""),this.setState({firstArgumentValue:n.value}))}}},{key:"setConditionElement",value:function(e,t){var n=d(this.props.source);n[e]=t,this.props.udpateConditionCallback(n)}},{key:"render",value:function(){var e=this,t=this.state,n=t.options,o=t.loading,r=this.props.source.value,c=this.props.firstArgument.value;if(o)return React.createElement(s.Spinner,null);if(0===n.length&&void 0===c.ajax_url)return React.createElement(s.BaseControl,null,React.createElement(s.TextControl,{value:r&&r.value?r.value:"",placeholder:A(this.props.firstArgument)?Object(a.__)("Enter taxonomy slug","wpv-views"):Object(a.__)("Value","wpv-views"),className:"conditional-text-control",onChange:function(t){return e.setConditionElement("value",{value:t,label:t})}}));var u=c.ajax_url,l=c.ajax_action,p=c.value,f=c.ajax_nonce;return React.createElement("div",null,this.state.error&&React.createElement(s.Notice,{status:"error",isDismissible:!1},Object(a.__)("Please, enter valid data: ","wpv-views")+this.state.error),React.createElement(s.BaseControl,null,React.createElement(i.Select,{key:p,placeholder:Object(a.__)("Select...","wpv-views"),styles:this.reactSelectStyles,value:r||{},defaultOptions:!0,restInfo:{base:"",url:u,args:{action:l,taxonomy:p,wpnonce:f,search:"%s"},parseCallback:function(e){return e.data.terms.map((function(e){return tn(tn({},e),{},{id:e.slug})}))},allowBlank:!0},onChange:function(t){return e.setConditionElement("value",t)}})))}}])&&nn(t.prototype,n),o&&nn(t,o),c}(c.Component);function pn(e){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=gn(e);if(t){var r=gn(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return _n(this,n)}}function _n(e,t){return!t||"object"!==pn(t)&&"function"!=typeof t?bn(e):t}function bn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yn={default:[{label:"=",value:"eq"}],taxonomies:[{label:"Contains",value:"contains"}],equivalent:[{label:"=",value:"eq"}]},jn={firstArgument:{source:{value:"post-field"},value:{value:"",label:""}},operator:yn.default[0],secondArgument:{source:{value:"post-field-value"},value:{label:"",value:""}}},On=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(s,e);var t,n,o,r=hn(s);function s(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),wn(bn(t=r.call(this,e)),"reactSelectStyles",{menu:function(e){return dn(dn({},e),{},{position:"relative"})},placeholder:function(e){return dn(dn({},e),{},{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},input:function(e,t){return dn(dn({},e),{},{"& input:focus":{boxShadow:(t.isFocused,"none !important")}})}}),!e.udpateConditionCallback)throw new Error("You must set udpateConditionCallback for <Condition />");return t}return t=s,(n=[{key:"setConditionElement",value:function(e,t){var n=this.props.condition;n[e]=t,"operator"===e&&"empty"===t.value&&(n.secondArgument=d(jn.secondArgument));var o=yn.taxonomies.find((function(e){return e.value===n.operator.value}));"operator"===e||!T(t)&&!A(t)||o||(n.operator=d(yn.taxonomies[0])),this.props.udpateConditionCallback(d(n))}},{key:"render",value:function(){var e=this,t=this.props,n=t.condition,o=t.componentId,r=t.parentId,s=t.onError,u=t.configuration,l=yn,p=A(n.firstArgument)||A(n.secondArgument)||T(n.firstArgument)||T(n.secondArgument)?l.taxonomies:l.default,f=!!n.firstArgument.source&&"date"===n.firstArgument.source.value,d=!!n.firstArgument.value&&!!n.firstArgument.value.source&&["post-date","post-date-gmt","post-date-modified","post-date-modified-gmt"].includes(n.firstArgument.value.source),v="".concat(o,"-first")+("post"===n.firstArgument.source.value?(new Date).getTime():""),m="".concat(o,"-second")+("post"===n.secondArgument.source.value?(new Date).getTime():"");return React.createElement(c.Fragment,null,React.createElement(Xt,{key:v,source:n.firstArgument,udpateConditionCallback:function(t){return e.setConditionElement("firstArgument",t)},componentId:v,isDateFunction:!1,isPostDate:!1,parentId:r,configuration:u,isOtherTaxonomy:!1,onError:s}),React.createElement("div",{className:"tb-condition__operator"},React.createElement(i.Select,{styles:this.reactSelectStyles,placeholder:Object(a.__)("Select an option","wpv-views"),value:n.operator,options:p,onChange:function(t){return e.setConditionElement("operator",t)}})),"empty"!==n.operator.value&&React.createElement(ln,{key:m,source:n.secondArgument,configuration:u,udpateConditionCallback:function(t){return e.setConditionElement("secondArgument",t)},componentId:m,isDateFunction:f,isPostDate:d,parentId:r,firstArgument:n.firstArgument,onError:s}))}}])&&vn(t.prototype,n),o&&vn(t,o),s}(c.Component)},"@wordpress/api-fetch":function(e,t){e.exports=window.wp.apiFetch},"@wordpress/components":function(e,t){e.exports=window.wp.components},"@wordpress/element":function(e,t){e.exports=window.wp.element},"@wordpress/hooks":function(e,t){e.exports=window.wp.hooks},"@wordpress/i18n":function(e,t){e.exports=window.wp.i18n},ToolsetDynamicSources:function(e,t){e.exports=ToolsetDynamicSources},"toolset/block/control":function(e,t){e.exports=window.toolsetCommonEs.block.control}});