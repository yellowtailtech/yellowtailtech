"use strict";var WPFormsBuilderWebhooks=window.WPFormsBuilderWebhooks||function(t){var s={$holder:t(".wpforms-panel-content-section-webhooks"),init:function(){t(s.ready)},ready:function(){s.events()},events:function(){t("#wpforms-builder").on("wpformsSaved",s.requiredFields.init).on("wpformsSettingsBlockAdded",s.webhookBlockAdded).on("wpformsFieldMapTableAddedRow",s.fieldMapTableAddRow).on("change.wpformsWebhooks","#wpforms-panel-field-settings-webhooks_enable",s.webhooksToggle).on("input.wpformsWebhooks",".wpforms-field-map-table .http-key-source",s.updateNameAttr),s.$holder.on("change.wpformsWebhooks",".wpforms-field-map-table .wpforms-field-map-select",s.changeSourceSelect).on("change.wpformsWebhooks",".wpforms-field-map-table .wpforms-field-map-is-secure-checkbox",s.changeSecure).on("click.wpformsWebhooks",".wpforms-field-map-table .wpforms-field-map-custom-value-close",s.closeCustomValue).on("click",".wpforms-field-map-table .wpforms-field-map-is-secure.disabled input",s.returnFalseHandler).on("keydown",".wpforms-field-map-table .wpforms-field-map-is-secure.disabled input",s.returnFalseHandler)},webhookBlockAdded:function(e,o){o.length&&"webhook"===o.data("block-type")&&o.find(".wpforms-field-map-table .wpforms-field-map-custom-value-close").trigger("click")},fieldMapTableAddRow:function(e,o,s){o.length&&"webhook"===o.data("block-type")&&s.length&&(s.find(".wpforms-field-map-is-secure-checkbox").val("1"),s.find(".wpforms-field-map-custom-value-close").trigger("click"))},webhooksToggle:function(){s.$holder.find(".wpforms-builder-settings-block-webhook, .wpforms-webooks-add").toggleClass("hidden",t(this).not(":checked"))},updateNameAttr:function(){var e=t(this),r=e.val(),e=e.closest("tr"),o=e.find(".wpforms-field-map-select"),i=o.data("name");!r&&""!==r||(o=e.find("td.field").hasClass("field-is-custom-value")?e.find(".wpforms-field-map-custom-value, .wpforms-field-map-is-secure-checkbox"):o).each(function(e,o){var s=i+t(o).data("suffix");t(o).attr("name",s.replace("{source}",r.replace(/[^a-zA-Z0-9._-]/gi,"")))})},changeSourceSelect:function(){var e=t(this).closest("tr"),o=this.value&&"custom_value"===this.value;o&&(t(this).attr("name",""),e.find("td.field").toggleClass("field-is-custom-value",o),e.find(".http-key-source").trigger("input.wpformsWebhooks"))},changeSecure:function(e){t(this).closest("tr").find(".wpforms-field-map-custom-value").attr("type",e.target.checked?"password":"text")},closeCustomValue:function(e){var o=t(this).closest("tr");e.preventDefault(),o.find("td.field").removeClass("field-is-custom-value"),o.find(".wpforms-field-map-select").prop("selectedIndex",0),o.find(".wpforms-field-map-is-secure").removeClass("disabled"),o.find(".wpforms-field-map-is-secure-checkbox").attr("name","").prop("checked",!1),o.find(".wpforms-field-map-custom-value").attr("name","").attr("type","text").prop("readonly",!1).val("")},returnFalseHandler:function(){return!1},requiredFields:{hasErrors:!1,isNotified:!1,init:function(){var e=s.$holder.find(".wpforms-builder-settings-block-webhook");e.length&&!e.hasClass("hidden")&&(s.requiredFields.isNotified=!1,e.each(s.requiredFields.check))},check:function(){s.requiredFields.hasErrors=!1,t(this).find("input.wpforms-required, select.wpforms-required").each(function(){var e=t(this),o=e.val();_.isEmpty(o)||e.hasClass("wpforms-required-url")&&!wpf.isURL(o)?(e.addClass("wpforms-error"),s.requiredFields.hasErrors=!0):e.removeClass("wpforms-error")}),s.requiredFields.notify()},notify:function(){s.requiredFields.hasErrors&&!s.requiredFields.isNotified&&(t.alert({title:wpforms_builder.heads_up,content:wpforms_builder.webhook_required_flds,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}}}),s.requiredFields.isNotified=!0)}}};return s}((document,window,jQuery));WPFormsBuilderWebhooks.init();